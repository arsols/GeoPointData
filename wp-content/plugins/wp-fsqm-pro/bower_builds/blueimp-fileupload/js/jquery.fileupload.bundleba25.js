/*!
 * JavaScript Templates
 * https://github.com/blueimp/JavaScript-Templates
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * https://opensource.org/licenses/MIT
 *
 * Inspired by John Resig's JavaScript Micro-Templating:
 * http://ejohn.org/blog/javascript-micro-templating/
 * @preserve
 */
/*!
 * JavaScript Load Image
 * https://github.com/blueimp/JavaScript-Load-Image
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * https://opensource.org/licenses/MIT
 * @preserve
 */
/*!
 * JavaScript Canvas to Blob
 * https://github.com/blueimp/JavaScript-Canvas-to-Blob
 *
 * Copyright 2012, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * https://opensource.org/licenses/MIT
 *
 * Based on stackoverflow user Stoive's code snippet:
 * http://stackoverflow.com/q/4998908
 * @preserve
 */
/*!
 * blueimp Gallery jQuery plugin
 * https://github.com/blueimp/Gallery
 *
 * Copyright 2013, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * https://opensource.org/licenses/MIT
 * @preserve
 */
/*!
 * jQuery File Upload Plugin
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * https://opensource.org/licenses/MIT
 * @preserve
 */
!function(e){"use strict";var t=function(e,i){var n=/[^\w\-.:]/.test(e)?new Function(t.arg+",tmpl","var _e=tmpl.encode"+t.helper+",_s='"+e.replace(t.regexp,t.func)+"';return _s;"):t.cache[e]=t.cache[e]||t(t.load(e));return i?n(i,t):function(e){return n(e,t)}};t.cache={},t.load=function(e){return document.getElementById(e).innerHTML},t.regexp=/([\s'\\])(?!(?:[^{]|\{(?!%))*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g,t.func=function(e,t,i,n,o,s){return t?{"\n":"\\n","\r":"\\r","\t":"\\t"," ":" "}[t]||"\\"+t:i?"="===i?"'+_e("+n+")+'":"'+("+n+"==null?'':"+n+")+'":o?"';":s?"_s+='":void 0},t.encReg=/[<>&"'\x00]/g,t.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"},t.encode=function(e){return(null==e?"":""+e).replace(t.encReg,function(e){return t.encMap[e]||""})},t.arg="o",t.helper=",print=function(s,e){_s+=e?(s==null?'':s):_e(s);},include=function(s,d){_s+=tmpl(s,d);}","function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports?module.exports=t:e.tmpl=t}(this),function(e){"use strict";var t=e.URL||e.webkitURL;function i(e){return!!t&&t.createObjectURL(e)}function n(e){return!!t&&t.revokeObjectURL(e)}function o(e,t){!e||"blob:"!==e.slice(0,5)||t&&t.noRevoke||n(e)}function s(t,i,n,o){if(!e.FileReader)return!1;var s=new FileReader;s.onload=function(){i.call(s,this.result)},n&&(s.onabort=s.onerror=function(){n.call(s,this.error)});var r=s[o||"readAsDataURL"];return r?(r.call(s,t),s):void 0}function r(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"}function a(t,n,l){function d(n,d){var u,c=document.createElement("img");function p(e,t){n!==d?e instanceof Error?d(e):((t=t||{}).image=e,n(t)):n&&n(e,t)}function h(n,o){o&&e.console&&console.log(o),n&&r("Blob",n)?u=i(t=n):(u=t,l&&l.crossOrigin&&(c.crossOrigin=l.crossOrigin)),c.src=u}return c.onerror=function(e){o(u,l),d&&d.call(c,e)},c.onload=function(){o(u,l);var e={originalWidth:c.naturalWidth||c.width,originalHeight:c.naturalHeight||c.height};try{a.transform(c,l,p,t,e)}catch(e){d&&d(e)}},"string"==typeof t?(a.requiresMetaData(l)?a.fetchBlob(t,h,l):h(),c):r("Blob",t)||r("File",t)?(u=i(t))?(c.src=u,c):s(t,function(e){c.src=e},d):void 0}return e.Promise&&"function"!=typeof n?(l=n,new Promise(d)):d(n,n)}a.requiresMetaData=function(e){return e&&e.meta},a.fetchBlob=function(e,t){t()},a.transform=function(e,t,i,n,o){i(e,o)},a.global=e,a.readFile=s,a.isInstanceOf=r,a.createObjectURL=i,a.revokeObjectURL=n,"function"==typeof define&&define.amd?define(function(){return a}):"object"==typeof module&&module.exports?module.exports=a:e.loadImage=a}("undefined"!=typeof window&&window||this),function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image"],e):"object"==typeof module&&module.exports?e(require("./load-image")):e(window.loadImage)}(function(e){"use strict";var t=e.transform;e.createCanvas=function(t,i,n){if(n&&e.global.OffscreenCanvas)return new OffscreenCanvas(t,i);var o=document.createElement("canvas");return o.width=t,o.height=i,o},e.transform=function(i,n,o,s,r){t.call(e,e.scale(i,n,r),n,o,s,r)},e.transformCoordinates=function(){},e.getTransformedOptions=function(e,t){var i,n,o,s,r=t.aspectRatio;if(!r)return t;for(n in i={},t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i.crop=!0,r<(o=e.naturalWidth||e.width)/(s=e.naturalHeight||e.height)?(i.maxWidth=s*r,i.maxHeight=s):(i.maxWidth=o,i.maxHeight=o/r),i},e.drawImage=function(e,t,i,n,o,s,r,a,l){var d=t.getContext("2d");return!1===l.imageSmoothingEnabled?(d.msImageSmoothingEnabled=!1,d.imageSmoothingEnabled=!1):l.imageSmoothingQuality&&(d.imageSmoothingQuality=l.imageSmoothingQuality),d.drawImage(e,i,n,o,s,0,0,r,a),d},e.requiresCanvas=function(e){return e.canvas||e.crop||!!e.aspectRatio},e.scale=function(t,i,n){i=i||{},n=n||{};var o,s,r,a,l,d,u,c,p,h,f,m,g=t.getContext||e.requiresCanvas(i)&&!!e.global.HTMLCanvasElement,y=t.naturalWidth||t.width,v=t.naturalHeight||t.height,b=y,w=v;function _(){var e=Math.max((r||b)/b,(a||w)/w);1<e&&(b*=e,w*=e)}function C(){var e=Math.min((o||b)/b,(s||w)/w);e<1&&(b*=e,w*=e)}if(g&&(u=(i=e.getTransformedOptions(t,i,n)).left||0,c=i.top||0,i.sourceWidth?(l=i.sourceWidth,void 0!==i.right&&void 0===i.left&&(u=y-l-i.right)):l=y-u-(i.right||0),i.sourceHeight?(d=i.sourceHeight,void 0!==i.bottom&&void 0===i.top&&(c=v-d-i.bottom)):d=v-c-(i.bottom||0),b=l,w=d),o=i.maxWidth,s=i.maxHeight,r=i.minWidth,a=i.minHeight,g&&o&&s&&i.crop?(f=l/d-(b=o)/(w=s))<0?(d=s*l/o,void 0===i.top&&void 0===i.bottom&&(c=(v-d)/2)):0<f&&(l=o*d/s,void 0===i.left&&void 0===i.right&&(u=(y-l)/2)):((i.contain||i.cover)&&(r=o=o||r,a=s=s||a),i.cover?(C(),_()):(_(),C())),g){if(1<(p=i.pixelRatio)&&(!t.style.width||Math.floor(parseFloat(t.style.width,10))!==Math.floor(y/p))&&(b*=p,w*=p),e.orientationCropBug&&!t.getContext&&(u||c||l!==y||d!==v)&&(f=t,t=e.createCanvas(y,v,!0),e.drawImage(f,t,0,0,y,v,y,v,i)),0<(h=i.downsamplingRatio)&&h<1&&b<l&&w<d)for(;b<l*h;)m=e.createCanvas(l*h,d*h,!0),e.drawImage(t,m,u,c,l,d,m.width,m.height,i),c=u=0,l=m.width,d=m.height,t=m;return m=e.createCanvas(b,w),e.transformCoordinates(m,i,n),1<p&&(m.style.width=m.width/p+"px"),e.drawImage(t,m,u,c,l,d,b,w,i).setTransform(1,0,0,1,0,0),m}return t.width=b,t.height=w,t}}),function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image"],e):"object"==typeof module&&module.exports?e(require("./load-image")):e(window.loadImage)}(function(e){"use strict";var t=e.global,i=e.transform,n=t.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),o=t.ArrayBuffer&&ArrayBuffer.prototype.slice||function(e,t){t=t||this.byteLength-e;var i=new Uint8Array(this,e,t),n=new Uint8Array(t);return n.set(i),n.buffer},s={jpeg:{65505:[],65517:[]}};function r(i,r,a,l){var d=this;function u(r,u){if(!(t.DataView&&n&&i&&12<=i.size&&"image/jpeg"===i.type))return r(l);var c=a.maxMetaDataSize||262144;e.readFile(n.call(i,0,c),function(e){var t=new DataView(e);if(65496!==t.getUint16(0))return u(new Error("Invalid JPEG file: Missing JPEG marker."));for(var i,n,c,p,h=2,f=t.byteLength-4,m=h;h<f&&(65504<=(i=t.getUint16(h))&&i<=65519||65534===i);){if(h+(n=t.getUint16(h+2)+2)>t.byteLength){console.log("Invalid JPEG metadata: Invalid segment size.");break}if((c=s.jpeg[i])&&!a.disableMetaDataParsers)for(p=0;p<c.length;p+=1)c[p].call(d,t,h,n,l,a);m=h+=n}!a.disableImageHead&&6<m&&(l.imageHead=o.call(e,0,m)),r(l)},u,"readAsArrayBuffer")||r(l)}return a=a||{},t.Promise&&"function"!=typeof r?(l=a=r||{},new Promise(u)):(l=l||{},u(r,r))}function a(e,t,i){return e&&t&&i?new Blob([i,n.call(e,t.byteLength)],{type:"image/jpeg"}):null}e.transform=function(n,o,s,a,l){e.requiresMetaData(o)?r(a,function(r){r!==l&&(t.console&&console.log(r),r=l),i.call(e,n,o,s,a,r)},o,l=l||{}):i.apply(e,arguments)},e.blobSlice=n,e.bufferSlice=o,e.replaceHead=function(e,i,n){var o={maxMetaDataSize:256,disableMetaDataParsers:!0};if(!n&&t.Promise)return r(e,o).then(function(t){return a(e,t.imageHead,i)});r(e,function(t){n(a(e,t.imageHead,i))},o)},e.parseMetaData=r,e.metaDataParsers=s}),function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image"],e):"object"==typeof module&&module.exports?e(require("./load-image")):e(window.loadImage)}(function(e){"use strict";var t=e.global;t.fetch&&t.Request&&t.Response&&t.Response.prototype.blob?e.fetchBlob=function(e,i,n){function o(e){return e.blob()}if(t.Promise&&"function"!=typeof i)return fetch(new Request(e,i)).then(o);fetch(new Request(e,n)).then(o).then(i).catch(function(e){i(null,e)})}:t.XMLHttpRequest&&""===(new XMLHttpRequest).responseType&&(e.fetchBlob=function(e,i,n){function o(t,i){n=n||{};var o=new XMLHttpRequest;o.open(n.method||"GET",e),n.headers&&Object.keys(n.headers).forEach(function(e){o.setRequestHeader(e,n.headers[e])}),o.withCredentials="include"===n.credentials,o.responseType="blob",o.onload=function(){t(o.response)},o.onerror=o.onabort=o.ontimeout=function(e){t===i?i(null,e):i(e)},o.send(n.body)}return t.Promise&&"function"!=typeof i?(n=i,new Promise(o)):o(i,i)})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image","./load-image-scale","./load-image-meta"],e):"object"==typeof module&&module.exports?e(require("./load-image"),require("./load-image-scale"),require("./load-image-meta")):e(window.loadImage)}(function(e){"use strict";var t,i,n=e.transform,o=e.requiresCanvas,s=e.requiresMetaData,r=e.transformCoordinates,a=e.getTransformedOptions;function l(t,i){var n=t&&t.orientation;return!0===n&&!e.orientation||1===n&&e.orientation||(!i||e.orientation)&&1<n&&n<9}function d(e,t){return e!==t&&(1===e&&1<t&&t<9||1<e&&e<9)}function u(e,t){if(1<t&&t<9)switch(e){case 2:case 4:return 4<t;case 5:case 7:return t%2==0;case 6:case 8:return 2===t||4===t||5===t||7===t}}(t=e).global.document&&((i=document.createElement("img")).onload=function(){var e;t.orientation=2===i.width&&3===i.height,t.orientation&&((e=t.createCanvas(1,1,!0).getContext("2d")).drawImage(i,1,1,1,1,0,0,1,1),t.orientationCropBug="255,255,255,255"!==e.getImageData(0,0,1,1).data.toString())},i.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAIAAwMBEQACEQEDEQH/xABRAAEAAAAAAAAAAAAAAAAAAAAKEAEBAQADAQEAAAAAAAAAAAAGBQQDCAkCBwEBAAAAAAAAAAAAAAAAAAAAABEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AG8T9NfSMEVMhQvoP3fFiRZ+MTHDifa/95OFSZU5OzRzxkyejv8ciEfhSceSXGjS8eSdLnZc2HDm4M3BxcXwH/9k="),e.requiresCanvas=function(t){return l(t)||o.call(e,t)},e.requiresMetaData=function(t){return l(t,!0)||s.call(e,t)},e.transform=function(t,i,o,s,r){n.call(e,t,i,function(t,i){var n,s,r;!i||4<(n=e.orientation&&i.exif&&i.exif.get("Orientation"))&&n<9&&(s=i.originalWidth,r=i.originalHeight,i.originalWidth=r,i.originalHeight=s),o(t,i)},s,r)},e.getTransformedOptions=function(t,i,n){var o=a.call(e,t,i),s=n.exif&&n.exif.get("Orientation"),r=o.orientation,l=e.orientation&&s;if(!0===r&&(r=s),!d(r,l))return o;var c,p,h=o.top,f=o.right,m=o.bottom,g=o.left,y={};for(var v in o)Object.prototype.hasOwnProperty.call(o,v)&&(y[v]=o[v]);if((4<(y.orientation=r)&&!(4<l)||r<5&&4<l)&&(y.maxWidth=o.maxHeight,y.maxHeight=o.maxWidth,y.minWidth=o.minHeight,y.minHeight=o.minWidth,y.sourceWidth=o.sourceHeight,y.sourceHeight=o.sourceWidth),1<l){switch(l){case 2:f=o.left,g=o.right;break;case 3:h=o.bottom,f=o.left,m=o.top,g=o.right;break;case 4:h=o.bottom,m=o.top;break;case 5:h=o.left,f=o.bottom,m=o.right,g=o.top;break;case 6:h=o.left,f=o.top,m=o.right,g=o.bottom;break;case 7:h=o.right,f=o.top,m=o.left,g=o.bottom;break;case 8:h=o.right,f=o.bottom,m=o.left,g=o.top}u(r,l)&&(c=h,p=f,h=m,f=g,m=c,g=p)}switch(y.top=h,y.right=f,y.bottom=m,y.left=g,r){case 2:y.right=g,y.left=f;break;case 3:y.top=m,y.right=g,y.bottom=h,y.left=f;break;case 4:y.top=m,y.bottom=h;break;case 5:y.top=g,y.right=m,y.bottom=f,y.left=h;break;case 6:y.top=f,y.right=m,y.bottom=g,y.left=h;break;case 7:y.top=f,y.right=h,y.bottom=g,y.left=m;break;case 8:y.top=g,y.right=h,y.bottom=f,y.left=m}return y},e.transformCoordinates=function(t,i,n){r.call(e,t,i,n);var o=i.orientation,s=e.orientation&&n.exif&&n.exif.get("Orientation");if(d(o,s)){var a=t.getContext("2d"),l=t.width,c=t.height,p=l,h=c;switch((4<o&&!(4<s)||o<5&&4<s)&&(t.width=c,t.height=l),4<o&&(p=c,h=l),s){case 2:a.translate(p,0),a.scale(-1,1);break;case 3:a.translate(p,h),a.rotate(Math.PI);break;case 4:a.translate(0,h),a.scale(1,-1);break;case 5:a.rotate(-.5*Math.PI),a.scale(-1,1);break;case 6:a.rotate(-.5*Math.PI),a.translate(-p,0);break;case 7:a.rotate(-.5*Math.PI),a.translate(-p,h),a.scale(1,-1);break;case 8:a.rotate(.5*Math.PI),a.translate(0,-h)}switch(u(o,s)&&(a.translate(p,h),a.rotate(Math.PI)),o){case 2:a.translate(l,0),a.scale(-1,1);break;case 3:a.translate(l,c),a.rotate(Math.PI);break;case 4:a.translate(0,c),a.scale(1,-1);break;case 5:a.rotate(.5*Math.PI),a.scale(1,-1);break;case 6:a.rotate(.5*Math.PI),a.translate(0,-c);break;case 7:a.rotate(.5*Math.PI),a.translate(l,-c),a.scale(-1,1);break;case 8:a.rotate(-.5*Math.PI),a.translate(-l,0)}}}}),function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image","./load-image-meta"],e):"object"==typeof module&&module.exports?e(require("./load-image"),require("./load-image-meta")):e(window.loadImage)}(function(e){"use strict";function t(e){e&&(Object.defineProperty(this,"map",{value:this.ifds[e].map}),Object.defineProperty(this,"tags",{value:this.tags&&this.tags[e]||{}}))}t.prototype.ifds={ifd1:{name:"Thumbnail",map:t.prototype.map={Orientation:274,Thumbnail:"ifd1",Blob:513,Exif:34665,GPSInfo:34853,Interoperability:40965}},34665:{name:"Exif",map:{}},34853:{name:"GPSInfo",map:{}},40965:{name:"Interoperability",map:{}}},t.prototype.get=function(e){return this[e]||this[this.map[e]]};var i={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,i){return e.getUint16(t,i)},size:2},4:{getValue:function(e,t,i){return e.getUint32(t,i)},size:4},5:{getValue:function(e,t,i){return e.getUint32(t,i)/e.getUint32(t+4,i)},size:8},9:{getValue:function(e,t,i){return e.getInt32(t,i)},size:4},10:{getValue:function(e,t,i){return e.getInt32(t,i)/e.getInt32(t+4,i)},size:8}};function n(e,t,i){return(!e||e[i])&&(!t||!0!==t[i])}function o(e,t,o,s,r,a,l,d){var u,c,p,h,f,m;if(o+6>e.byteLength)console.log("Invalid Exif data: Invalid directory offset.");else{if(!((c=o+2+12*(u=e.getUint16(o,s)))+4>e.byteLength)){for(p=0;p<u;p+=1)h=o+2+12*p,n(l,d,f=e.getUint16(h,s))&&(m=function(e,t,n,o,s,r){var a,l,d,u,c,p,h=i[o];if(h){if(!((l=4<(a=h.size*s)?t+e.getUint32(n+8,r):n+8)+a>e.byteLength)){if(1===s)return h.getValue(e,l,r);for(d=[],u=0;u<s;u+=1)d[u]=h.getValue(e,l+u*h.size,r);if(h.ascii){for(c="",u=0;u<d.length&&"\0"!==(p=d[u]);u+=1)c+=p;return c}return d}console.log("Invalid Exif data: Invalid data offset.")}else console.log("Invalid Exif data: Invalid tag type.")}(e,t,h,e.getUint16(h+2,s),e.getUint32(h+4,s),s),r[f]=m,a&&(a[f]=h));return e.getUint32(c,s)}console.log("Invalid Exif data: Invalid directory size.")}}i[7]=i[1],e.parseExifData=function(i,s,r,a,l){if(!l.disableExif){var d,u,c,p=l.includeExifTags,h=l.excludeExifTags||{34665:{37500:!0}},f=s+10;if(1165519206===i.getUint32(s+4))if(f+8>i.byteLength)console.log("Invalid Exif data: Invalid segment size.");else if(0===i.getUint16(s+8)){switch(i.getUint16(f)){case 18761:d=!0;break;case 19789:d=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}42===i.getUint16(f+2,d)?(u=i.getUint32(f+4,d),a.exif=new t,l.disableExifOffsets||(a.exifOffsets=new t,a.exifTiffOffset=f,a.exifLittleEndian=d),(u=o(i,f,f+u,d,a.exif,a.exifOffsets,p,h))&&n(p,h,"ifd1")&&(a.exif.ifd1=u,a.exifOffsets&&(a.exifOffsets.ifd1=f+u)),Object.keys(a.exif.ifds).forEach(function(e){var n,s,r,l,u,c,m,g;s=e,r=i,l=f,u=d,c=p,m=h,(g=(n=a).exif[s])&&(n.exif[s]=new t(s),n.exifOffsets&&(n.exifOffsets[s]=new t(s)),o(r,l,l+g,u,n.exif[s],n.exifOffsets&&n.exifOffsets[s],c&&c[s],m&&m[s]))}),(c=a.exif.ifd1)&&c[513]&&(c[513]=function(t,i,n){if(n){if(!(i+n>t.byteLength))return new Blob([e.bufferSlice.call(t.buffer,i,i+n)],{type:"image/jpeg"});console.log("Invalid Exif data: Invalid thumbnail data.")}}(i,f+c[513],c[514]))):console.log("Invalid Exif data: Missing TIFF marker.")}else console.log("Invalid Exif data: Missing byte alignment offset.")}},e.metaDataParsers.jpeg[65505].push(e.parseExifData),e.exifWriters={274:function(e,t,i){var n=t.exifOffsets[274];return n&&new DataView(e,n+8,2).setUint16(0,i,t.exifLittleEndian),e}},e.writeExifData=function(t,i,n,o){return e.exifWriters[i.exif.map[n]](t,i,o)},e.ExifMap=t}),function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image","./load-image-exif"],e):"object"==typeof module&&module.exports?e(require("./load-image"),require("./load-image-exif")):e(window.loadImage)}(function(e){"use strict";var t=e.ExifMap.prototype;t.tags={256:"ImageWidth",257:"ImageHeight",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",34665:{36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber"},34853:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},40965:{1:"InteroperabilityIndex"}},t.tags.ifd1=t.tags,t.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"Original",2:"Horizontal flip",3:"Rotate 180° CCW",4:"Vertical flip",5:"Vertical flip + Rotate 90° CW",6:"Rotate 90° CW",7:"Horizontal flip + Rotate 90° CW",8:"Rotate 90° CCW"}},t.getText=function(e){var t=this.get(e);switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[e][t];case"ExifVersion":case"FlashpixVersion":if(!t)return;return String.fromCharCode(t[0],t[1],t[2],t[3]);case"ComponentsConfiguration":if(!t)return;return this.stringValues[e][t[0]]+this.stringValues[e][t[1]]+this.stringValues[e][t[2]]+this.stringValues[e][t[3]];case"GPSVersionID":if(!t)return;return t[0]+"."+t[1]+"."+t[2]+"."+t[3]}return String(t)},t.getAll=function(){var e,t,i,n={};for(e in this)Object.prototype.hasOwnProperty.call(this,e)&&((t=this[e])&&t.getAll?n[this.ifds[e].name]=t.getAll():(i=this.tags[e])&&(n[i]=this.getText(i)));return n},t.getName=function(e){var t=this.tags[e];return"object"==typeof t?this.ifds[e].name:t},function(){var e,i,n,o=t.tags;for(e in o)if(Object.prototype.hasOwnProperty.call(o,e))if(i=t.ifds[e])for(e in n=o[e])Object.prototype.hasOwnProperty.call(n,e)&&(i.map[n[e]]=Number(e));else t.map[o[e]]=Number(e)}()}),function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image","./load-image-meta"],e):"object"==typeof module&&module.exports?e(require("./load-image"),require("./load-image-meta")):e(window.loadImage)}(function(e){"use strict";function t(){}function i(e,t,i,n,o){return"binary"===t.types[e]?new Blob([i.buffer.slice(n,n+o)]):"Uint16"===t.types[e]?i.getUint16(n):function(e,t,i){for(var n="",o=t+i,s=t;s<o;s+=1)n+=String.fromCharCode(e.getUint8(s));return n}(i,n,o)}function n(e,t,n,o,s,r){for(var a,l,d,u,c,p=t+n,h=t;h<p;)28===e.getUint8(h)&&2===e.getUint8(h+1)&&(d=e.getUint8(h+2),s&&!s[d]||r&&r[d]||(l=e.getInt16(h+3),a=i(d,o.iptc,e,h+5,l),o.iptc[d]=(c=a,void 0===(u=o.iptc[d])?c:u instanceof Array?(u.push(c),u):[u,c]),o.iptcOffsets&&(o.iptcOffsets[d]=h))),h+=1}t.prototype.map={ObjectName:5},t.prototype.types={0:"Uint16",200:"Uint16",201:"Uint16",202:"binary"},t.prototype.get=function(e){return this[e]||this[this.map[e]]},e.parseIptcData=function(e,i,o,s,r){if(!r.disableIptc)for(var a,l,d,u,c=i+o;i+8<c;){if(u=i,943868237===(d=e).getUint32(u)&&1028===d.getUint16(u+4)){var p=(a=i,l=void 0,(l=e.getUint8(a+7))%2!=0&&(l+=1),0===l&&(l=4),l),h=i+8+p;if(c<h){console.log("Invalid IPTC data: Invalid segment offset.");break}var f=e.getUint16(i+6+p);if(c<i+f){console.log("Invalid IPTC data: Invalid segment size.");break}return s.iptc=new t,r.disableIptcOffsets||(s.iptcOffsets=new t),void n(e,h,f,s,r.includeIptcTags,r.excludeIptcTags||{202:!0})}i+=1}},e.metaDataParsers.jpeg[65517].push(e.parseIptcData),e.IptcMap=t}),function(e){"use strict";"function"==typeof define&&define.amd?define(["./load-image","./load-image-iptc"],e):"object"==typeof module&&module.exports?e(require("./load-image"),require("./load-image-iptc")):e(window.loadImage)}(function(e){"use strict";var t=e.IptcMap.prototype;t.tags={0:"ApplicationRecordVersion",3:"ObjectTypeReference",4:"ObjectAttributeReference",5:"ObjectName",7:"EditStatus",8:"EditorialUpdate",10:"Urgency",12:"SubjectReference",15:"Category",20:"SupplementalCategories",22:"FixtureIdentifier",25:"Keywords",26:"ContentLocationCode",27:"ContentLocationName",30:"ReleaseDate",35:"ReleaseTime",37:"ExpirationDate",38:"ExpirationTime",40:"SpecialInstructions",42:"ActionAdvised",45:"ReferenceService",47:"ReferenceDate",50:"ReferenceNumber",55:"DateCreated",60:"TimeCreated",62:"DigitalCreationDate",63:"DigitalCreationTime",65:"OriginatingProgram",70:"ProgramVersion",75:"ObjectCycle",80:"Byline",85:"BylineTitle",90:"City",92:"Sublocation",95:"State",100:"CountryCode",101:"Country",103:"OriginalTransmissionReference",105:"Headline",110:"Credit",115:"Source",116:"CopyrightNotice",118:"Contact",120:"Caption",121:"LocalCaption",122:"Writer",125:"RasterizedCaption",130:"ImageType",131:"ImageOrientation",135:"LanguageIdentifier",150:"AudioType",151:"AudioSamplingRate",152:"AudioSamplingResolution",153:"AudioDuration",154:"AudioOutcue",184:"JobID",185:"MasterDocumentID",186:"ShortDocumentID",187:"UniqueDocumentID",188:"OwnerID",200:"ObjectPreviewFileFormat",201:"ObjectPreviewFileVersion",202:"ObjectPreviewData",221:"Prefs",225:"ClassifyState",228:"SimilarityIndex",230:"DocumentNotes",231:"DocumentHistory",232:"ExifCameraInfo",255:"CatalogSets"},t.stringValues={10:{0:"0 (reserved)",1:"1 (most urgent)",2:"2",3:"3",4:"4",5:"5 (normal urgency)",6:"6",7:"7",8:"8 (least urgent)",9:"9 (user-defined priority)"},75:{a:"Morning",b:"Both Morning and Evening",p:"Evening"},131:{L:"Landscape",P:"Portrait",S:"Square"}},t.getText=function(e){var t=this.get(e),i=this.map[e],n=this.stringValues[i];return n?n[t]:String(t)},t.getAll=function(){var e,t,i={};for(e in this)Object.prototype.hasOwnProperty.call(this,e)&&(t=this.tags[e])&&(i[t]=this.getText(t));return i},t.getName=function(e){return this.tags[e]},function(){var e,i=t.tags,n=t.map||{};for(e in i)Object.prototype.hasOwnProperty.call(i,e)&&(n[i[e]]=Number(e))}()}),function(e){"use strict";var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,i=e.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),n=i&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),o=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,s=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,r=(i||o)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(e){var t,r,a,l,d,u,c,p,h=e.match(s);if(!h)throw new Error("invalid data URI");for(t=h[2]?h[1]:"text/plain"+(h[3]||";charset=US-ASCII"),r=!!h[4],a=e.slice(h[0].length),l=(r?atob:decodeURIComponent)(a),d=new ArrayBuffer(l.length),u=new Uint8Array(d),c=0;c<l.length;c+=1)u[c]=l.charCodeAt(c);return i?new Blob([n?u:d],{type:t}):((p=new o).append(d),p.getBlob(t))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(e,i,n){var o=this;setTimeout(function(){n&&t.toDataURL&&r?e(r(o.toDataURL(i,n))):e(o.mozGetAsFile("blob",i))})}:t.toDataURL&&r&&(t.msToBlob?t.toBlob=function(e,i,n){var o=this;setTimeout(function(){(i&&"image/png"!==i||n)&&t.toDataURL&&r?e(r(o.toDataURL(i,n))):e(o.msToBlob(i))})}:t.toBlob=function(e,t,i){var n=this;setTimeout(function(){e(r(n.toDataURL(t,i)))})})),"function"==typeof define&&define.amd?define(function(){return r}):"object"==typeof module&&module.exports?module.exports=r:e.dataURLtoBlob=r}(window),function(e){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper"],e):(window.blueimp=window.blueimp||{},window.blueimp.Gallery=e(window.blueimp.helper||window.jQuery))}(function(e){"use strict";function t(e,i){return void 0===document.body.style.maxHeight?null:this&&this.options===t.prototype.options?void(e&&e.length?(this.list=e,this.num=e.length,this.initOptions(i),this.initialize()):this.console.log("blueimp Gallery: No or empty list provided as first argument.",e)):new t(e,i)}return e.extend(t.prototype,{options:{container:"#blueimp-gallery",slidesContainer:"div",titleElement:"h3",displayClass:"blueimp-gallery-display",controlsClass:"blueimp-gallery-controls",singleClass:"blueimp-gallery-single",leftEdgeClass:"blueimp-gallery-left",rightEdgeClass:"blueimp-gallery-right",playingClass:"blueimp-gallery-playing",svgasimgClass:"blueimp-gallery-svgasimg",smilClass:"blueimp-gallery-smil",slideClass:"slide",slideActiveClass:"slide-active",slidePrevClass:"slide-prev",slideNextClass:"slide-next",slideLoadingClass:"slide-loading",slideErrorClass:"slide-error",slideContentClass:"slide-content",toggleClass:"toggle",prevClass:"prev",nextClass:"next",closeClass:"close",playPauseClass:"play-pause",typeProperty:"type",titleProperty:"title",altTextProperty:"alt",urlProperty:"href",srcsetProperty:"srcset",sizesProperty:"sizes",sourcesProperty:"sources",displayTransition:!0,clearSlides:!0,toggleControlsOnEnter:!0,toggleControlsOnSlideClick:!0,toggleSlideshowOnSpace:!0,enableKeyboardNavigation:!0,closeOnEscape:!0,closeOnSlideClick:!0,closeOnSwipeUpOrDown:!0,closeOnHashChange:!0,emulateTouchEvents:!0,stopTouchEventsPropagation:!1,hidePageScrollbars:!0,disableScroll:!0,carousel:!1,continuous:!0,unloadElements:!0,startSlideshow:!1,slideshowInterval:5e3,slideshowDirection:"ltr",index:0,preloadRange:2,transitionDuration:300,slideshowTransitionDuration:500,event:void 0,onopen:void 0,onopened:void 0,onslide:void 0,onslideend:void 0,onslidecomplete:void 0,onclose:void 0,onclosed:void 0},carouselOptions:{hidePageScrollbars:!1,toggleControlsOnEnter:!1,toggleSlideshowOnSpace:!1,enableKeyboardNavigation:!1,closeOnEscape:!1,closeOnSlideClick:!1,closeOnSwipeUpOrDown:!1,closeOnHashChange:!1,disableScroll:!1,startSlideshow:!0},console:window.console&&"function"==typeof window.console.log?window.console:{log:function(){}},support:function(t){var i,n={source:!!window.HTMLSourceElement,picture:!!window.HTMLPictureElement,svgasimg:document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),smil:!!document.createElementNS&&/SVGAnimate/.test(document.createElementNS("http://www.w3.org/2000/svg","animate").toString()),touch:void 0!==window.ontouchstart||window.DocumentTouch&&document instanceof DocumentTouch},o={webkitTransition:{end:"webkitTransitionEnd",prefix:"-webkit-"},MozTransition:{end:"transitionend",prefix:"-moz-"},OTransition:{end:"otransitionend",prefix:"-o-"},transition:{end:"transitionend",prefix:""}};for(i in o)if(Object.prototype.hasOwnProperty.call(o,i)&&void 0!==t.style[i]){n.transition=o[i],n.transition.name=i;break}function s(){var e,i,o=n.transition;document.body.appendChild(t),o&&(e=o.name.slice(0,-9)+"ransform",void 0!==t.style[e]&&(t.style[e]="translateZ(0)",i=window.getComputedStyle(t).getPropertyValue(o.prefix+"transform"),n.transform={prefix:o.prefix,name:e,translate:!0,translateZ:!!i&&"none"!==i})),document.body.removeChild(t)}return document.body?s():e(document).on("DOMContentLoaded",s),n}(document.createElement("div")),requestAnimationFrame:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,cancelAnimationFrame:window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame,initialize:function(){if(this.initStartIndex(),!1===this.initWidget())return!1;this.initEventListeners(),this.onslide(this.index),this.ontransitionend(),this.options.startSlideshow&&this.play()},slide:function(e,t){window.clearTimeout(this.timeout);var i,n,o,s=this.index;if(s!==e&&1!==this.num){if(t=t||this.options.transitionDuration,this.support.transform){for(this.options.continuous||(e=this.circle(e)),i=Math.abs(s-e)/(s-e),this.options.continuous&&(n=i,(i=-this.positions[this.circle(e)]/this.slideWidth)!==n&&(e=-i*this.num+e)),o=Math.abs(s-e)-1;o;)--o,this.move(this.circle((s<e?e:s)-o-1),this.slideWidth*i,0);e=this.circle(e),this.move(s,this.slideWidth*i,t),this.move(e,0,t),this.options.continuous&&this.move(this.circle(e-i),-this.slideWidth*i,0)}else e=this.circle(e),this.animate(s*-this.slideWidth,e*-this.slideWidth,t);this.onslide(e)}},getIndex:function(){return this.index},getNumber:function(){return this.num},prev:function(){(this.options.continuous||this.index)&&this.slide(this.index-1)},next:function(){(this.options.continuous||this.index<this.num-1)&&this.slide(this.index+1)},play:function(e){var t=this,i=this.index+("rtl"===this.options.slideshowDirection?-1:1);window.clearTimeout(this.timeout),this.interval=e||this.options.slideshowInterval,1<this.elements[this.index]&&(this.timeout=this.setTimeout(!this.requestAnimationFrame&&this.slide||function(e,i){t.animationFrameId=t.requestAnimationFrame.call(window,function(){t.slide(e,i)})},[i,this.options.slideshowTransitionDuration],this.interval)),this.container.addClass(this.options.playingClass),this.slidesContainer[0].setAttribute("aria-live","off"),this.playPauseElement.length&&this.playPauseElement[0].setAttribute("aria-pressed","true")},pause:function(){window.clearTimeout(this.timeout),this.interval=null,this.cancelAnimationFrame&&(this.cancelAnimationFrame.call(window,this.animationFrameId),this.animationFrameId=null),this.container.removeClass(this.options.playingClass),this.slidesContainer[0].setAttribute("aria-live","polite"),this.playPauseElement.length&&this.playPauseElement[0].setAttribute("aria-pressed","false")},add:function(e){var t;for(e.concat||(e=Array.prototype.slice.call(e)),this.list.concat||(this.list=Array.prototype.slice.call(this.list)),this.list=this.list.concat(e),this.num=this.list.length,2<this.num&&null===this.options.continuous&&(this.options.continuous=!0,this.container.removeClass(this.options.leftEdgeClass)),this.container.removeClass(this.options.rightEdgeClass).removeClass(this.options.singleClass),t=this.num-e.length;t<this.num;t+=1)this.addSlide(t),this.positionSlide(t);this.positions.length=this.num,this.initSlides(!0)},resetSlides:function(){this.slidesContainer.empty(),this.unloadAllSlides(),this.slides=[]},handleClose:function(){var e=this.options;this.destroyEventListeners(),this.pause(),this.container[0].style.display="none",this.container.removeClass(e.displayClass).removeClass(e.singleClass).removeClass(e.leftEdgeClass).removeClass(e.rightEdgeClass),e.hidePageScrollbars&&(document.body.style.overflow=this.bodyOverflowStyle),this.options.clearSlides&&this.resetSlides(),this.options.onclosed&&this.options.onclosed.call(this)},close:function(){var e=this;this.options.onclose&&this.options.onclose.call(this),this.support.transition&&this.options.displayTransition?(this.container.on(this.support.transition.end,function t(i){i.target===e.container[0]&&(e.container.off(e.support.transition.end,t),e.handleClose())}),this.container.removeClass(this.options.displayClass)):this.handleClose()},circle:function(e){return(this.num+e%this.num)%this.num},move:function(e,t,i){this.translateX(e,t,i),this.positions[e]=t},translate:function(e,t,i,n){var o,s,r;this.slides[e]&&(o=this.slides[e].style,s=this.support.transition,r=this.support.transform,o[s.name+"Duration"]=n+"ms",o[r.name]="translate("+t+"px, "+i+"px)"+(r.translateZ?" translateZ(0)":""))},translateX:function(e,t,i){this.translate(e,t,0,i)},translateY:function(e,t,i){this.translate(e,0,t,i)},animate:function(e,t,i){var n,o,s;i?(n=this,o=(new Date).getTime(),s=window.setInterval(function(){var r=(new Date).getTime()-o;if(i<r)return n.slidesContainer[0].style.left=t+"px",n.ontransitionend(),void window.clearInterval(s);n.slidesContainer[0].style.left=(t-e)*(Math.floor(r/i*100)/100)+e+"px"},4)):this.slidesContainer[0].style.left=t+"px"},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},onresize:function(){this.initSlides(!0)},onhashchange:function(){this.options.closeOnHashChange&&this.close()},onmousedown:function(e){e.which&&1===e.which&&"VIDEO"!==e.target.nodeName&&"AUDIO"!==e.target.nodeName&&(e.preventDefault(),(e.originalEvent||e).touches=[{pageX:e.pageX,pageY:e.pageY}],this.ontouchstart(e))},onmousemove:function(e){this.touchStart&&((e.originalEvent||e).touches=[{pageX:e.pageX,pageY:e.pageY}],this.ontouchmove(e))},onmouseup:function(e){this.touchStart&&(this.ontouchend(e),delete this.touchStart)},onmouseout:function(t){var i,n;this.touchStart&&(i=t.target,(n=t.relatedTarget)&&(n===i||e.contains(i,n))||this.onmouseup(t))},ontouchstart:function(e){this.options.stopTouchEventsPropagation&&this.stopPropagation(e);var t=(e.originalEvent||e).touches[0];this.touchStart={x:t.pageX,y:t.pageY,time:Date.now()},this.isScrolling=void 0,this.touchDelta={}},ontouchmove:function(e){this.options.stopTouchEventsPropagation&&this.stopPropagation(e);var t,i,n=(e.originalEvent||e).touches,o=n[0],s=(e.originalEvent||e).scale,r=this.index;if(!(1<n.length||s&&1!==s))if(this.options.disableScroll&&e.preventDefault(),this.touchDelta={x:o.pageX-this.touchStart.x,y:o.pageY-this.touchStart.y},t=this.touchDelta.x,void 0===this.isScrolling&&(this.isScrolling=this.isScrolling||Math.abs(t)<Math.abs(this.touchDelta.y)),this.isScrolling)this.options.carousel||this.translateY(r,this.touchDelta.y+this.positions[r],0);else for(e.preventDefault(),window.clearTimeout(this.timeout),this.options.continuous?i=[this.circle(r+1),r,this.circle(r-1)]:(this.touchDelta.x=t/=!r&&0<t||r===this.num-1&&t<0?Math.abs(t)/this.slideWidth+1:1,i=[r],r&&i.push(r-1),r<this.num-1&&i.unshift(r+1));i.length;)r=i.pop(),this.translateX(r,t+this.positions[r],0)},ontouchend:function(e){this.options.stopTouchEventsPropagation&&this.stopPropagation(e);var t,i,n,o,s,r=this.index,a=Math.abs(this.touchDelta.x),l=this.slideWidth,d=Math.ceil(this.options.transitionDuration*(1-a/l)/2),u=20<a,c=!r&&0<this.touchDelta.x||r===this.num-1&&this.touchDelta.x<0,p=!u&&this.options.closeOnSwipeUpOrDown&&20<Math.abs(this.touchDelta.y);this.options.continuous&&(c=!1),t=this.touchDelta.x<0?-1:1,this.isScrolling?p?this.close():this.translateY(r,0,d):u&&!c?(i=r+t,n=r-t,o=l*t,s=-l*t,this.options.continuous?(this.move(this.circle(i),o,0),this.move(this.circle(r-2*t),s,0)):0<=i&&i<this.num&&this.move(i,o,0),this.move(r,this.positions[r]+o,d),this.move(this.circle(n),this.positions[this.circle(n)]+o,d),r=this.circle(n),this.onslide(r)):this.options.continuous?(this.move(this.circle(r-1),-l,d),this.move(r,0,d),this.move(this.circle(r+1),l,d)):(r&&this.move(r-1,-l,d),this.move(r,0,d),r<this.num-1&&this.move(r+1,l,d))},ontouchcancel:function(e){this.touchStart&&(this.ontouchend(e),delete this.touchStart)},ontransitionend:function(e){var t=this.slides[this.index];e&&t!==e.target||(this.interval&&this.play(),this.setTimeout(this.options.onslideend,[this.index,t]))},oncomplete:function(t){var i,n=t.target||t.srcElement,o=n&&n.parentNode;n&&o&&(i=this.getNodeIndex(o),e(o).removeClass(this.options.slideLoadingClass),"error"===t.type?(e(o).addClass(this.options.slideErrorClass),this.elements[i]=3):this.elements[i]=2,n.clientHeight>this.container[0].clientHeight&&(n.style.maxHeight=this.container[0].clientHeight),this.interval&&this.slides[this.index]===o&&this.play(),this.setTimeout(this.options.onslidecomplete,[i,o]))},onload:function(e){this.oncomplete(e)},onerror:function(e){this.oncomplete(e)},onkeydown:function(e){switch(e.which||e.keyCode){case 13:this.options.toggleControlsOnEnter&&(this.preventDefault(e),this.toggleControls());break;case 27:this.options.closeOnEscape&&(this.close(),e.stopImmediatePropagation());break;case 32:this.options.toggleSlideshowOnSpace&&(this.preventDefault(e),this.toggleSlideshow());break;case 37:this.options.enableKeyboardNavigation&&(this.preventDefault(e),this.prev());break;case 39:this.options.enableKeyboardNavigation&&(this.preventDefault(e),this.next())}},handleClick:function(t){var i=this.options,n=t.target||t.srcElement,o=n.parentNode;function s(t){return e(n).hasClass(t)||e(o).hasClass(t)}s(i.toggleClass)?(this.preventDefault(t),this.toggleControls()):s(i.prevClass)?(this.preventDefault(t),this.prev()):s(i.nextClass)?(this.preventDefault(t),this.next()):s(i.closeClass)?(this.preventDefault(t),this.close()):s(i.playPauseClass)?(this.preventDefault(t),this.toggleSlideshow()):o===this.slidesContainer[0]?i.closeOnSlideClick?(this.preventDefault(t),this.close()):i.toggleControlsOnSlideClick&&(this.preventDefault(t),this.toggleControls()):o.parentNode&&o.parentNode===this.slidesContainer[0]&&i.toggleControlsOnSlideClick&&(this.preventDefault(t),this.toggleControls())},onclick:function(e){if(!(this.options.emulateTouchEvents&&this.touchDelta&&(20<Math.abs(this.touchDelta.x)||20<Math.abs(this.touchDelta.y))))return this.handleClick(e);delete this.touchDelta},updateEdgeClasses:function(e){e?this.container.removeClass(this.options.leftEdgeClass):this.container.addClass(this.options.leftEdgeClass),e===this.num-1?this.container.addClass(this.options.rightEdgeClass):this.container.removeClass(this.options.rightEdgeClass)},updateActiveSlide:function(t,i){for(var n,o,s=this.slides,r=this.options,a=[{index:i,method:"addClass",hidden:!1},{index:t,method:"removeClass",hidden:!0}];a.length;)n=a.pop(),e(s[n.index])[n.method](r.slideActiveClass),o=this.circle(n.index-1),(r.continuous||o<n.index)&&e(s[o])[n.method](r.slidePrevClass),o=this.circle(n.index+1),(r.continuous||o>n.index)&&e(s[o])[n.method](r.slideNextClass);this.slides[t].setAttribute("aria-hidden","true"),this.slides[i].removeAttribute("aria-hidden")},handleSlide:function(e,t){this.options.continuous||this.updateEdgeClasses(t),this.updateActiveSlide(e,t),this.loadElements(t),this.options.unloadElements&&this.unloadElements(e,t),this.setTitle(t)},onslide:function(e){this.handleSlide(this.index,e),this.index=e,this.setTimeout(this.options.onslide,[e,this.slides[e]])},setTitle:function(e){var t=this.slides[e].firstChild,i=t.title||t.alt,n=this.titleElement;n.length&&(this.titleElement.empty(),i&&n[0].appendChild(document.createTextNode(i)))},setTimeout:function(e,t,i){var n=this;return e&&window.setTimeout(function(){e.apply(n,t||[])},i||0)},imageFactory:function(t,i){var n,o,s,r,a,l,d,u,c=this.options,p=this,h=t,f=this.imagePrototype.cloneNode(!1);if("string"!=typeof h&&(h=this.getItemProperty(t,c.urlProperty),s=this.support.picture&&this.support.source&&this.getItemProperty(t,c.sourcesProperty),r=this.getItemProperty(t,c.srcsetProperty),a=this.getItemProperty(t,c.sizesProperty),l=this.getItemProperty(t,c.titleProperty),d=this.getItemProperty(t,c.altTextProperty)||l),f.draggable=!1,l&&(f.title=l),d&&(f.alt=d),e(f).on("load error",function t(s){if(!o){if(!(s={type:s.type,target:n||f}).target.parentNode)return p.setTimeout(t,[s]);o=!0,e(f).off("load error",t),i(s)}}),s&&s.length){for(n=this.picturePrototype.cloneNode(!1),u=0;u<s.length;u+=1)n.appendChild(e.extend(this.sourcePrototype.cloneNode(!1),s[u]));n.appendChild(f),e(n).addClass(c.toggleClass)}return r&&(a&&(f.sizes=a),f.srcset=r),f.src=h,n||f},createElement:function(t,i){var n=t&&this.getItemProperty(t,this.options.typeProperty),o=n&&this[n.split("/")[0]+"Factory"]||this.imageFactory,s=t&&o.call(this,t,i);return s||(s=this.elementPrototype.cloneNode(!1),this.setTimeout(i,[{type:"error",target:s}])),e(s).addClass(this.options.slideContentClass),s},iteratePreloadRange:function(e,t){for(var i=this.num,n=this.options,o=Math.min(i,2*n.preloadRange+1),s=e,r=0;r<o;r+=1){if((s+=r*(r%2==0?-1:1))<0||i<=s){if(!n.continuous)continue;s=this.circle(s)}t.call(this,s)}},loadElement:function(t){this.elements[t]||(this.slides[t].firstChild?this.elements[t]=e(this.slides[t]).hasClass(this.options.slideErrorClass)?3:2:(this.elements[t]=1,e(this.slides[t]).addClass(this.options.slideLoadingClass),this.slides[t].appendChild(this.createElement(this.list[t],this.proxyListener))))},loadElements:function(e){this.iteratePreloadRange(e,this.loadElement)},unloadElements:function(e,t){var i=this.options.preloadRange;this.iteratePreloadRange(e,function(e){var n=Math.abs(e-t);i<n&&n+i<this.num&&(this.unloadSlide(e),delete this.elements[e])})},addSlide:function(e){var t=this.slidePrototype.cloneNode(!1);t.setAttribute("data-index",e),t.setAttribute("aria-hidden","true"),this.slidesContainer[0].appendChild(t),this.slides.push(t)},positionSlide:function(e){var t=this.slides[e];t.style.width=this.slideWidth+"px",this.support.transform&&(t.style.left=e*-this.slideWidth+"px",this.move(e,this.index>e?-this.slideWidth:this.index<e?this.slideWidth:0,0))},initSlides:function(t){var i,n;for(t||(this.positions=[],this.positions.length=this.num,this.elements={},this.picturePrototype=this.support.picture&&document.createElement("picture"),this.sourcePrototype=this.support.source&&document.createElement("source"),this.imagePrototype=document.createElement("img"),this.elementPrototype=document.createElement("div"),this.slidePrototype=this.elementPrototype.cloneNode(!1),e(this.slidePrototype).addClass(this.options.slideClass),this.slides=this.slidesContainer[0].children,i=this.options.clearSlides||this.slides.length!==this.num),this.slideWidth=this.container[0].clientWidth,this.slideHeight=this.container[0].clientHeight,this.slidesContainer[0].style.width=this.num*this.slideWidth+"px",i&&this.resetSlides(),n=0;n<this.num;n+=1)i&&this.addSlide(n),this.positionSlide(n);this.options.continuous&&this.support.transform&&(this.move(this.circle(this.index-1),-this.slideWidth,0),this.move(this.circle(this.index+1),this.slideWidth,0)),this.support.transform||(this.slidesContainer[0].style.left=this.index*-this.slideWidth+"px")},unloadSlide:function(e){var t=this.slides[e],i=t.firstChild;null!==i&&t.removeChild(i)},unloadAllSlides:function(){for(var e=0,t=this.slides.length;e<t;e++)this.unloadSlide(e)},toggleControls:function(){var e=this.options.controlsClass;this.container.hasClass(e)?this.container.removeClass(e):this.container.addClass(e)},toggleSlideshow:function(){this.interval?this.pause():this.play()},getNodeIndex:function(e){return parseInt(e.getAttribute("data-index"),10)},getNestedProperty:function(e,t){return t.replace(/\[(?:'([^']+)'|"([^"]+)"|(\d+))\]|(?:(?:^|\.)([^\.\[]+))/g,function(t,i,n,o,s){var r=s||i||n||o&&parseInt(o,10);t&&e&&(e=e[r])}),e},getDataProperty:function(t,i){var n,o;if(t.dataset?(n=i.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()}),o=t.dataset[n]):t.getAttribute&&(o=t.getAttribute("data-"+i.replace(/([A-Z])/g,"-$1").toLowerCase())),"string"==typeof o){if(/^(true|false|null|-?\d+(\.\d+)?|\{[\s\S]*\}|\[[\s\S]*\])$/.test(o))try{return e.parseJSON(o)}catch(e){}return o}},getItemProperty:function(e,t){var i=this.getDataProperty(e,t);return void 0===i&&(i=e[t]),void 0===i&&(i=this.getNestedProperty(e,t)),i},initStartIndex:function(){var e,t=this.options.index,i=this.options.urlProperty;if(t&&"number"!=typeof t)for(e=0;e<this.num;e+=1)if(this.list[e]===t||this.getItemProperty(this.list[e],i)===this.getItemProperty(t,i)){t=e;break}this.index=this.circle(parseInt(t,10)||0)},initEventListeners:function(){var t=this,i=this.slidesContainer;function n(e){var i=t.support.transition&&t.support.transition.end===e.type?"transitionend":e.type;t["on"+i](e)}e(window).on("resize",n),e(window).on("hashchange",n),e(document.body).on("keydown",n),this.container.on("click",n),this.support.touch?i.on("touchstart touchmove touchend touchcancel",n):this.options.emulateTouchEvents&&this.support.transition&&i.on("mousedown mousemove mouseup mouseout",n),this.support.transition&&i.on(this.support.transition.end,n),this.proxyListener=n},destroyEventListeners:function(){var t=this.slidesContainer,i=this.proxyListener;e(window).off("resize",i),e(document.body).off("keydown",i),this.container.off("click",i),this.support.touch?t.off("touchstart touchmove touchend touchcancel",i):this.options.emulateTouchEvents&&this.support.transition&&t.off("mousedown mousemove mouseup mouseout",i),this.support.transition&&t.off(this.support.transition.end,i)},handleOpen:function(){this.options.onopened&&this.options.onopened.call(this)},initWidget:function(){var t=this;return this.container=e(this.options.container),this.container.length?(this.slidesContainer=this.container.find(this.options.slidesContainer).first(),this.slidesContainer.length?(this.titleElement=this.container.find(this.options.titleElement).first(),this.playPauseElement=this.container.find("."+this.options.playPauseClass).first(),1===this.num&&this.container.addClass(this.options.singleClass),this.support.svgasimg&&this.container.addClass(this.options.svgasimgClass),this.support.smil&&this.container.addClass(this.options.smilClass),this.options.onopen&&this.options.onopen.call(this),this.support.transition&&this.options.displayTransition?this.container.on(this.support.transition.end,function e(i){i.target===t.container[0]&&(t.container.off(t.support.transition.end,e),t.handleOpen())}):this.handleOpen(),this.options.hidePageScrollbars&&(this.bodyOverflowStyle=document.body.style.overflow,document.body.style.overflow="hidden"),this.container[0].style.display="block",this.initSlides(),void this.container.addClass(this.options.displayClass)):(this.console.log("blueimp Gallery: Slides container not found.",this.options.slidesContainer),!1)):(this.console.log("blueimp Gallery: Widget container not found.",this.options.container),!1)},initOptions:function(t){this.options=e.extend({},this.options),(t&&t.carousel||this.options.carousel&&(!t||!1!==t.carousel))&&e.extend(this.options,this.carouselOptions),e.extend(this.options,t),this.num<3&&(this.options.continuous=!!this.options.continuous&&null),this.support.transition||(this.options.emulateTouchEvents=!1),this.options.event&&this.preventDefault(this.options.event)}}),t}),function(e){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],e):e(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(e,t){"use strict";var i=t.prototype;e.extend(i.options,{fullscreen:!1});var n=i.initialize,o=i.close;return e.extend(i,{getFullScreenElement:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},requestFullScreen:function(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},initialize:function(){n.call(this),this.options.fullscreen&&!this.getFullScreenElement()&&this.requestFullScreen(this.container[0])},close:function(){this.getFullScreenElement()===this.container[0]&&this.exitFullScreen(),o.call(this)}}),t}),function(e){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],e):e(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(e,t){"use strict";var i=t.prototype;e.extend(i.options,{indicatorContainer:"ol",activeIndicatorClass:"active",thumbnailProperty:"thumbnail",thumbnailIndicators:!0});var n=i.initSlides,o=i.addSlide,s=i.resetSlides,r=i.handleClick,a=i.handleSlide,l=i.handleClose;return e.extend(i,{createIndicator:function(t){var i,n,o=this.indicatorPrototype.cloneNode(!1),s=this.getItemProperty(t,this.options.titleProperty),r=this.options.thumbnailProperty;return this.options.thumbnailIndicators&&(r&&(i=this.getItemProperty(t,r)),void 0===i&&(n=t.getElementsByTagName&&e(t).find("img")[0])&&(i=n.src),i&&(o.style.backgroundImage='url("'+i+'")')),s&&(o.title=s),o.setAttribute("role","link"),o},addIndicator:function(e){var t;this.indicatorContainer.length&&((t=this.createIndicator(this.list[e])).setAttribute("data-index",e),this.indicatorContainer[0].appendChild(t),this.indicators.push(t))},setActiveIndicator:function(t){this.indicators&&(this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),this.activeIndicator=e(this.indicators[t]),this.activeIndicator.addClass(this.options.activeIndicatorClass))},initSlides:function(e){e||(this.indicatorContainer=this.container.find(this.options.indicatorContainer),this.indicatorContainer.length&&(this.indicatorPrototype=document.createElement("li"),this.indicators=this.indicatorContainer[0].children)),n.call(this,e)},addSlide:function(e){o.call(this,e),this.addIndicator(e)},resetSlides:function(){s.call(this),this.indicatorContainer.empty(),this.indicators=[]},handleClick:function(e){var t=e.target||e.srcElement,i=t.parentNode;if(i===this.indicatorContainer[0])this.preventDefault(e),this.slide(this.getNodeIndex(t));else{if(i.parentNode!==this.indicatorContainer[0])return r.call(this,e);this.preventDefault(e),this.slide(this.getNodeIndex(i))}},handleSlide:function(e,t){a.call(this,e,t),this.setActiveIndicator(t)},handleClose:function(){this.activeIndicator&&this.activeIndicator.removeClass(this.options.activeIndicatorClass),l.call(this)}}),t}),function(e){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery"],e):e(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(e,t){"use strict";var i=t.prototype;e.extend(i.options,{videoContentClass:"video-content",videoLoadingClass:"video-loading",videoPlayingClass:"video-playing",videoIframeClass:"video-iframe",videoCoverClass:"video-cover",videoPlayClass:"video-play",videoPlaysInline:!0,videoPreloadProperty:"preload",videoPosterProperty:"poster"});var n=i.handleSlide;return e.extend(i,{handleSlide:function(e,t){n.call(this,e,t),this.setTimeout(function(){this.activeVideo&&this.activeVideo.pause()})},videoFactory:function(t,i,n){var o,s,r,a=this,l=this.options,d=this.elementPrototype.cloneNode(!1),u=e(d),c=[{type:"error",target:d}],p=n||document.createElement("video"),h=this.elementPrototype.cloneNode(!1),f=document.createElement("a"),m=this.getItemProperty(t,l.urlProperty),g=this.getItemProperty(t,l.sourcesProperty),y=this.getItemProperty(t,l.titleProperty),v=this.getItemProperty(t,l.videoPosterProperty),b=[f];if(u.addClass(l.videoContentClass),e(f).addClass(l.videoPlayClass),e(h).addClass(l.videoCoverClass).hasClass(l.toggleClass)||b.push(h),h.draggable=!1,y&&(d.title=y,f.setAttribute("aria-label",y)),v&&(h.style.backgroundImage='url("'+v+'")'),p.setAttribute?l.videoPlaysInline&&p.setAttribute("playsinline",""):u.addClass(l.videoIframeClass),p.preload=this.getItemProperty(t,l.videoPreloadProperty)||"none",this.support.source&&g)for(r=0;r<g.length;r+=1)p.appendChild(e.extend(this.sourcePrototype.cloneNode(!1),g[r]));return m&&(p.src=m),f.href=m||g&&g.length&&g[0].src,p.play&&p.pause&&((n||e(p)).on("error",function(){a.setTimeout(i,c)}).on("pause",function(){p.seeking||(s=!1,u.removeClass(a.options.videoLoadingClass).removeClass(a.options.videoPlayingClass),o&&a.container.addClass(a.options.controlsClass),p.controls=!1,p===a.activeVideo&&delete a.activeVideo,a.interval&&a.play())}).on("playing",function(){s=!1,h.removeAttribute("style"),u.removeClass(a.options.videoLoadingClass).addClass(a.options.videoPlayingClass)}).on("play",function(){window.clearTimeout(a.timeout),s=!0,u.addClass(a.options.videoLoadingClass),a.container.hasClass(a.options.controlsClass)?(o=!0,a.container.removeClass(a.options.controlsClass)):o=!1,p.controls=!0,a.activeVideo=p}),e(b).on("click",function(e){a.preventDefault(e),a.activeVideo=p,s?p.pause():p.play()}),d.appendChild(n&&n.element||p)),d.appendChild(h),d.appendChild(f),this.setTimeout(i,[{type:"load",target:d}]),d}}),t}),function(e){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery-video"],e):e(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(e,t){"use strict";if(!window.postMessage)return t;var i=t.prototype;e.extend(i.options,{vimeoVideoIdProperty:"vimeo",vimeoPlayerUrl:"//player.vimeo.com/video/VIDEO_ID?api=1&player_id=PLAYER_ID",vimeoPlayerIdPrefix:"vimeo-player-",vimeoClickToPlay:!1});var n=i.textFactory||i.imageFactory,o=function(e,t,i,n){this.url=e,this.videoId=t,this.playerId=i,this.clickToPlay=n,this.element=document.createElement("div"),this.listeners={}},s=0;return e.extend(o.prototype,{on:function(e,t){return this.listeners[e]=t,this},loadAPI:function(){var t,i,n=this,o="//f.vimeocdn.com/js/froogaloop2.min.js",s=document.getElementsByTagName("script"),r=s.length;function a(){!i&&n.playOnReady&&n.play(),i=!0}for(;r;)if(s[--r].src===o){t=s[r];break}t||((t=document.createElement("script")).src=o),e(t).on("load",a),s[0].parentNode.insertBefore(t,s[0]),/loaded|complete/.test(t.readyState)&&a()},onReady:function(){var e=this;this.ready=!0,this.player.addEvent("play",function(){e.hasPlayed=!0,e.onPlaying()}),this.player.addEvent("pause",function(){e.onPause()}),this.player.addEvent("finish",function(){e.onPause()}),this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.listeners.playing(),this.playStatus=2)},onPause:function(){this.listeners.pause(),delete this.playStatus},insertIframe:function(){var e=document.createElement("iframe");e.src=this.url.replace("VIDEO_ID",this.videoId).replace("PLAYER_ID",this.playerId),e.id=this.playerId,this.element.parentNode.replaceChild(e,this.element),this.element=e},play:function(){var e=this;this.playStatus||(this.listeners.play(),this.playStatus=1),this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.api("play"):(this.playOnReady=!0,window.$f?this.player||(this.insertIframe(),this.player=$f(this.element),this.player.addEvent("ready",function(){e.onReady()})):this.loadAPI())},pause:function(){this.ready?this.player.api("pause"):this.playStatus&&(delete this.playOnReady,this.listeners.pause(),delete this.playStatus)}}),e.extend(i,{VimeoPlayer:o,textFactory:function(e,t){var i=this.options,r=this.getItemProperty(e,i.vimeoVideoIdProperty);return r?(void 0===this.getItemProperty(e,i.urlProperty)&&(e[i.urlProperty]="//vimeo.com/"+r),s+=1,this.videoFactory(e,t,new o(i.vimeoPlayerUrl,r,i.vimeoPlayerIdPrefix+s,i.vimeoClickToPlay))):n.call(this,e,t)}}),t}),function(e){"use strict";"function"==typeof define&&define.amd?define(["./blueimp-helper","./blueimp-gallery-video"],e):e(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}(function(e,t){"use strict";if(!window.postMessage)return t;var i=t.prototype;e.extend(i.options,{youTubeVideoIdProperty:"youtube",youTubePlayerVars:{wmode:"transparent"},youTubeClickToPlay:!1});var n=i.textFactory||i.imageFactory,o=function(e,t,i){this.videoId=e,this.playerVars=t,this.clickToPlay=i,this.element=document.createElement("div"),this.listeners={}};return e.extend(o.prototype,{on:function(e,t){return this.listeners[e]=t,this},loadAPI:function(){var e,t=this,i=window.onYouTubeIframeAPIReady,n="//www.youtube.com/iframe_api",o=document.getElementsByTagName("script"),s=o.length;for(window.onYouTubeIframeAPIReady=function(){i&&i.apply(this),t.playOnReady&&t.play()};s;)if(o[--s].src===n)return;(e=document.createElement("script")).src=n,o[0].parentNode.insertBefore(e,o[0])},onReady:function(){this.ready=!0,this.playOnReady&&this.play()},onPlaying:function(){this.playStatus<2&&(this.listeners.playing(),this.playStatus=2)},onPause:function(){this.listeners.pause(),delete this.playStatus},onStateChange:function(e){switch(window.clearTimeout(this.pauseTimeout),e.data){case YT.PlayerState.PLAYING:this.hasPlayed=!0,this.onPlaying();break;case YT.PlayerState.UNSTARTED:case YT.PlayerState.PAUSED:this.pauseTimeout=i.setTimeout.call(this,this.onPause,null,500);break;case YT.PlayerState.ENDED:this.onPause()}},onError:function(e){this.listeners.error(e)},play:function(){var e=this;this.playStatus||(this.listeners.play(),this.playStatus=1),this.ready?!this.hasPlayed&&(this.clickToPlay||window.navigator&&/iP(hone|od|ad)/.test(window.navigator.platform))?this.onPlaying():this.player.playVideo():(this.playOnReady=!0,window.YT&&YT.Player?this.player||(this.player=new YT.Player(this.element,{videoId:this.videoId,playerVars:this.playerVars,events:{onReady:function(){e.onReady()},onStateChange:function(t){e.onStateChange(t)},onError:function(t){e.onError(t)}}})):this.loadAPI())},pause:function(){this.ready?this.player.pauseVideo():this.playStatus&&(delete this.playOnReady,this.listeners.pause(),delete this.playStatus)}}),e.extend(i,{YouTubePlayer:o,textFactory:function(e,t){var i=this.options,s=this.getItemProperty(e,i.youTubeVideoIdProperty);return s?(void 0===this.getItemProperty(e,i.urlProperty)&&(e[i.urlProperty]="//www.youtube.com/watch?v="+s),void 0===this.getItemProperty(e,i.videoPosterProperty)&&(e[i.videoPosterProperty]="//img.youtube.com/vi/"+s+"/maxresdefault.jpg"),this.videoFactory(e,t,new o(s,i.youTubePlayerVars,i.youTubeClickToPlay))):n.call(this,e,t)}}),t}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./blueimp-gallery"],e):e(window.jQuery,window.blueimp.Gallery)}(function(e,t){"use strict";e(document).on("click","[data-gallery]",function(i){var n=e(this).data("gallery"),o=e(n),s=o.length&&o||e(t.prototype.options.container),r={onopen:function(){s.data("gallery",this).trigger("open")},onopened:function(){s.trigger("opened")},onslide:function(){s.trigger("slide",arguments)},onslideend:function(){s.trigger("slideend",arguments)},onslidecomplete:function(){s.trigger("slidecomplete",arguments)},onclose:function(){s.trigger("close")},onclosed:function(){s.trigger("closed").removeData("gallery")}},a=e.extend(s.data(),{container:s[0],index:this,event:i},r),l=e(this).closest("[data-gallery-group], body").find('[data-gallery="'+n+'"]');return a.filter&&(l=l.filter(a.filter)),new t(l,a)})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(window.jQuery)}(function(e){"use strict";var t=0,i=e,n="parseJSON";"JSON"in window&&"parse"in JSON&&(i=JSON,n="parse"),e.ajaxTransport("iframe",function(i){if(i.async){var n,o,s,r=i.initialIframeSrc||"javascript:false;";return{send:function(a,l){(n=e('<form style="display:none;"></form>')).attr("accept-charset",i.formAcceptCharset),s=/\?/.test(i.url)?"&":"?","DELETE"===i.type?(i.url=i.url+s+"_method=DELETE",i.type="POST"):"PUT"===i.type?(i.url=i.url+s+"_method=PUT",i.type="POST"):"PATCH"===i.type&&(i.url=i.url+s+"_method=PATCH",i.type="POST"),o=e('<iframe src="'+r+'" name="iframe-transport-'+(t+=1)+'"></iframe>').on("load",function(){var t,s=e.isArray(i.paramName)?i.paramName:[i.paramName];o.off("load").on("load",function(){var t;try{if(!(t=o.contents()).length||!t[0].firstChild)throw new Error}catch(e){t=void 0}l(200,"success",{iframe:t}),e('<iframe src="'+r+'"></iframe>').appendTo(n),window.setTimeout(function(){n.remove()},0)}),n.prop("target",o.prop("name")).prop("action",i.url).prop("method",i.type),i.formData&&e.each(i.formData,function(t,i){e('<input type="hidden"/>').prop("name",i.name).val(i.value).appendTo(n)}),i.fileInput&&i.fileInput.length&&"POST"===i.type&&(t=i.fileInput.clone(),i.fileInput.after(function(e){return t[e]}),i.paramName&&i.fileInput.each(function(t){e(this).prop("name",s[t]||i.paramName)}),n.append(i.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),i.fileInput.removeAttr("form")),window.setTimeout(function(){n.submit(),t&&t.length&&i.fileInput.each(function(i,n){var o=e(t[i]);e(n).prop("name",o.prop("name")).attr("form",o.attr("form")),o.replaceWith(n)})},0)}),n.append(o).appendTo(document.body)},abort:function(){o&&o.off("load").prop("src",r),n&&n.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&i[n](e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var i=t&&t[0];return i&&e.isXMLDoc(i)?i:e.parseXML(i.XMLDocument&&i.XMLDocument.xml||e(i.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery-ui/ui/widget"],e):"object"==typeof exports?e(require("jquery"),require("./vendor/jquery.ui.widget")):e(window.jQuery)}(function(e){"use strict";function t(t){var i="dragover"===t;return function(n){n.dataTransfer=n.originalEvent&&n.originalEvent.dataTransfer;var o=n.dataTransfer;o&&-1!==e.inArray("Files",o.types)&&!1!==this._trigger(t,e.Event(t,{delegatedEvent:n}))&&(n.preventDefault(),i&&(o.dropEffect="copy"))}}var i;e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file"/>').prop("disabled")),e.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,uniqueFilenames:void 0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,i){return t=this.messages[t]||t.toString(),i&&e.each(i,function(e,i){t=t.replace("{"+e+"}",i)}),t},formData:function(e){return e.serializeArray()},add:function(t,i){if(t.isDefaultPrevented())return!1;(i.autoUpload||!1!==i.autoUpload&&e(this).fileupload("option","autoUpload"))&&i.process().done(function(){i.submit()})},processData:!1,contentType:!1,cache:!1,timeout:0},_promisePipe:(i=e.fn.jquery.split("."),Number(i[0])>1||Number(i[1])>7?"then":"pipe"),_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,i){var n=e-this.timestamp;return(!this.bitrate||!i||n>i)&&(this.bitrate=(t-this.loaded)*(1e3/n)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var i;return"function"===e.type(t.formData)?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(i=[],e.each(t.formData,function(e,t){i.push({name:e,value:t})}),i):[]},_getTotal:function(t){var i=0;return e.each(t,function(e,t){i+=t.size||1}),i},_initProgressObject:function(t){var i={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,i):t._progress=i},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)Object.prototype.hasOwnProperty.call(e._response,t)&&delete e._response[t];else e._response={}},_onProgress:function(t,i){if(t.lengthComputable){var n,o=Date.now?Date.now():(new Date).getTime();if(i._time&&i.progressInterval&&o-i._time<i.progressInterval&&t.loaded!==t.total)return;i._time=o,n=Math.floor(t.loaded/t.total*(i.chunkSize||i._progress.total))+(i.uploadedBytes||0),this._progress.loaded+=n-i._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(o,this._progress.loaded,i.bitrateInterval),i._progress.loaded=i.loaded=n,i._progress.bitrate=i.bitrate=i._bitrateTimer.getBitrate(o,n,i.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),i),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var i=this,n=t.xhr?t.xhr():e.ajaxSettings.xhr();n.upload&&(e(n.upload).on("progress",function(e){var n=e.originalEvent;e.lengthComputable=n.lengthComputable,e.loaded=n.loaded,e.total=n.total,i._onProgress(e,t)}),t.xhr=function(){return n})},_deinitProgressListener:function(t){var i=t.xhr?t.xhr():e.ajaxSettings.xhr();i.upload&&e(i.upload).off("progress")},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_getUniqueFilename:function(e,t){return t[e=String(e)]?(e=e.replace(/(?: \(([\d]+)\))?(\.[^.]+)?$/,function(e,t,i){return" ("+(t?Number(t)+1:1)+")"+(i||"")}),this._getUniqueFilename(e,t)):(t[e]=!0,e)},_initXHRData:function(t){var i,n=this,o=t.files[0],s=t.multipart||!e.support.xhrFileUpload,r="array"===e.type(t.paramName)?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange),s&&!t.blob&&this._isInstanceOf("File",o)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(o.uploadName||o.name)+'"'),s?e.support.xhrFormDataFileUpload&&(t.postMessage?(i=this._getFormData(t),t.blob?i.push({name:r,value:t.blob}):e.each(t.files,function(n,o){i.push({name:"array"===e.type(t.paramName)&&t.paramName[n]||r,value:o})})):(n._isInstanceOf("FormData",t.formData)?i=t.formData:(i=new FormData,e.each(this._getFormData(t),function(e,t){i.append(t.name,t.value)})),t.blob?i.append(r,t.blob,o.uploadName||o.name):e.each(t.files,function(o,s){if(n._isInstanceOf("File",s)||n._isInstanceOf("Blob",s)){var a=s.uploadName||s.name;t.uniqueFilenames&&(a=n._getUniqueFilename(a,t.uniqueFilenames)),i.append("array"===e.type(t.paramName)&&t.paramName[o]||r,s,a)}})),t.data=i):(t.contentType=o.type||"application/octet-stream",t.data=t.blob||o),t.blob=null},_initIframeSettings:function(t){var i=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&i&&i!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var i=e(t.fileInput),n=t.paramName;return n?e.isArray(n)||(n=[n]):(n=[],i.each(function(){for(var t=e(this),i=t.prop("name")||"files[]",o=(t.prop("files")||[1]).length;o;)n.push(i),o-=1}),n.length||(n=[i.prop("name")||"files[]"])),n},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||"string"===e.type(t.form.prop("method"))&&t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var i=e.extend({},this.options,t);return this._initFormSettings(i),this._initDataSettings(i),i},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,i,n){var o=e.Deferred(),s=o.promise();return i=i||this.options.context||s,!0===t?o.resolveWith(i,n):!1===t&&o.rejectWith(i,n),s.abort=o.promise,this._enhancePromise(s)},_addConvenienceMethods:function(t,i){var n=this,o=function(t){return e.Deferred().resolveWith(n,t).promise()};i.process=function(t,s){return(t||s)&&(i._processQueue=this._processQueue=(this._processQueue||o([this]))[n._promisePipe](function(){return i.errorThrown?e.Deferred().rejectWith(n,[i]).promise():o(arguments)})[n._promisePipe](t,s)),this._processQueue||o([this])},i.submit=function(){return"pending"!==this.state()&&(i.jqXHR=this.jqXHR=!1!==n._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)&&n._onSend(t,this)),this.jqXHR||n._getXHRPromise()},i.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",n._trigger("fail",null,this),n._getXHRPromise(!1))},i.state=function(){return this.jqXHR?n._getDeferredState(this.jqXHR):this._processQueue?n._getDeferredState(this._processQueue):void 0},i.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===n._getDeferredState(this._processQueue)},i.progress=function(){return this._progress},i.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),i=t&&t.split("-"),n=i&&i.length>1&&parseInt(i[1],10);return n&&n+1},_chunkedUpload:function(t,i){t.uploadedBytes=t.uploadedBytes||0;var n,o,s=this,r=t.files[0],a=r.size,l=t.uploadedBytes,d=t.maxChunkSize||a,u=this._blobSlice,c=e.Deferred(),p=c.promise();return!(!(this._isXHRUpload(t)&&u&&(l||("function"===e.type(d)?d(t):d)<a))||t.data)&&(!!i||(l>=a?(r.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",r.error])):(o=function(){var i=e.extend({},t),p=i._progress.loaded;i.blob=u.call(r,l,l+("function"===e.type(d)?d(i):d),r.type),i.chunkSize=i.blob.size,i.contentRange="bytes "+l+"-"+(l+i.chunkSize-1)+"/"+a,s._trigger("chunkbeforesend",null,i),s._initXHRData(i),s._initProgressListener(i),n=(!1!==s._trigger("chunksend",null,i)&&e.ajax(i)||s._getXHRPromise(!1,i.context)).done(function(n,r,d){l=s._getUploadedBytes(d)||l+i.chunkSize,p+i.chunkSize-i._progress.loaded&&s._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-i.uploadedBytes,total:l-i.uploadedBytes}),i),t.uploadedBytes=i.uploadedBytes=l,i.result=n,i.textStatus=r,i.jqXHR=d,s._trigger("chunkdone",null,i),s._trigger("chunkalways",null,i),l<a?o():c.resolveWith(i.context,[n,r,d])}).fail(function(e,t,n){i.jqXHR=e,i.textStatus=t,i.errorThrown=n,s._trigger("chunkfail",null,i),s._trigger("chunkalways",null,i),c.rejectWith(i.context,[e,t,n])}).always(function(){s._deinitProgressListener(i)})},this._enhancePromise(p),p.abort=function(){return n.abort()},o(),p)))},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,i,n,o){var s=o._progress.total,r=o._response;o._progress.loaded<s&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:s,total:s}),o),r.result=o.result=t,r.textStatus=o.textStatus=i,r.jqXHR=o.jqXHR=n,this._trigger("done",null,o)},_onFail:function(e,t,i,n){var o=n._response;n.recalculateProgress&&(this._progress.loaded-=n._progress.loaded,this._progress.total-=n._progress.total),o.jqXHR=n.jqXHR=e,o.textStatus=n.textStatus=t,o.errorThrown=n.errorThrown=i,this._trigger("fail",null,n)},_onAlways:function(e,t,i,n){this._trigger("always",null,n)},_onSend:function(t,i){i.submit||this._addConvenienceMethods(t,i);var n,o,s,r,a=this,l=a._getAJAXSettings(i),d=function(){return a._sending+=1,l._bitrateTimer=new a._BitrateTimer,n=n||((o||!1===a._trigger("send",e.Event("send",{delegatedEvent:t}),l))&&a._getXHRPromise(!1,l.context,o)||a._chunkedUpload(l)||e.ajax(l)).done(function(e,t,i){a._onDone(e,t,i,l)}).fail(function(e,t,i){a._onFail(e,t,i,l)}).always(function(e,t,i){if(a._deinitProgressListener(l),a._onAlways(e,t,i,l),a._sending-=1,a._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>a._sending)for(var n=a._slots.shift();n;){if("pending"===a._getDeferredState(n)){n.resolve();break}n=a._slots.shift()}0===a._active&&a._trigger("stop")})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(s=e.Deferred(),this._slots.push(s),r=s[a._promisePipe](d)):(this._sequence=this._sequence[a._promisePipe](d,d),r=this._sequence),r.abort=function(){return o=[void 0,"abort","abort"],n?n.abort():(s&&s.rejectWith(l.context,o),d())},this._enhancePromise(r)):d()},_onAdd:function(t,i){var n,o,s,r,a=this,l=!0,d=e.extend({},this.options,i),u=i.files,c=u.length,p=d.limitMultiFileUploads,h=d.limitMultiFileUploadSize,f=d.limitMultiFileUploadSizeOverhead,m=0,g=this._getParamName(d),y=0;if(!c)return!1;if(h&&void 0===u[0].size&&(h=void 0),(d.singleFileUploads||p||h)&&this._isXHRUpload(d))if(d.singleFileUploads||h||!p)if(!d.singleFileUploads&&h)for(s=[],n=[],r=0;r<c;r+=1)m+=u[r].size+f,(r+1===c||m+u[r+1].size+f>h||p&&r+1-y>=p)&&(s.push(u.slice(y,r+1)),(o=g.slice(y,r+1)).length||(o=g),n.push(o),y=r+1,m=0);else n=g;else for(s=[],n=[],r=0;r<c;r+=p)s.push(u.slice(r,r+p)),(o=g.slice(r,r+p)).length||(o=g),n.push(o);else s=[u],n=[g];return i.originalFiles=u,e.each(s||u,function(o,r){var d=e.extend({},i);return d.files=s?r:[r],d.paramName=n[o],a._initResponseObject(d),a._initProgressObject(d),a._addConvenienceMethods(t,d),l=a._trigger("add",e.Event("add",{delegatedEvent:t}),d)}),l},_replaceFileInput:function(t){var i=t.fileInput,n=i.clone(!0),o=i.is(document.activeElement);t.fileInputClone=n,e("<form></form>").append(n)[0].reset(),i.after(n).detach(),o&&n.trigger("focus"),e.cleanData(i.off("remove")),this.options.fileInput=this.options.fileInput.map(function(e,t){return t===i[0]?n[0]:t}),i[0]===this.element[0]&&(this.element=n)},_handleFileTreeEntry:function(t,i){var n,o=this,s=e.Deferred(),r=[],a=function(e){e&&!e.entry&&(e.entry=t),s.resolve([e])},l=function(){n.readEntries(function(e){e.length?(r=r.concat(e),l()):function(e){o._handleFileTreeEntries(e,i+t.name+"/").done(function(e){s.resolve(e)}).fail(a)}(r)},a)};return i=i||"",t.isFile?t._file?(t._file.relativePath=i,s.resolve(t._file)):t.file(function(e){e.relativePath=i,s.resolve(e)},a):t.isDirectory?(n=t.createReader(),l()):s.resolve([]),s.promise()},_handleFileTreeEntries:function(t,i){var n=this;return e.when.apply(e,e.map(t,function(e){return n._handleFileTreeEntry(e,i)}))[this._promisePipe](function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){var i=(t=t||{}).items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(e.map(i,function(e){var t;return e.webkitGetAsEntry?((t=e.webkitGetAsEntry())&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){var i,n,o=(t=e(t)).prop("webkitEntries")||t.prop("entries");if(o&&o.length)return this._handleFileTreeEntries(o);if((i=e.makeArray(t.prop("files"))).length)void 0===i[0].name&&i[0].fileName&&e.each(i,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(!(n=t.prop("value")))return e.Deferred().resolve([]).promise();i=[{name:n.replace(/^.*\\/,"")}]}return e.Deferred().resolve(i).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles))[this._promisePipe](function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var i=this,n={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(n.fileInput).always(function(o){n.files=o,i.options.replaceFileInput&&i._replaceFileInput(n),!1!==i._trigger("change",e.Event("change",{delegatedEvent:t}),n)&&i._onAdd(t,n)})},_onPaste:function(t){var i=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,n={files:[]};i&&i.length&&(e.each(i,function(e,t){var i=t.getAsFile&&t.getAsFile();i&&n.files.push(i)}),!1!==this._trigger("paste",e.Event("paste",{delegatedEvent:t}),n)&&this._onAdd(t,n))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var i=this,n=t.dataTransfer,o={};n&&n.files&&n.files.length&&(t.preventDefault(),this._getDroppedFiles(n).always(function(n){o.files=n,!1!==i._trigger("drop",e.Event("drop",{delegatedEvent:t}),o)&&i._onAdd(t,o)}))},_onDragOver:t("dragover"),_onDragEnter:t("dragenter"),_onDragLeave:t("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_destroy:function(){this._destroyEventHandlers()},_setOption:function(t,i){var n=-1!==e.inArray(t,this._specialOptions);n&&this._destroyEventHandlers(),this._super(t,i),n&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),i=t.pop();return t.shift(),new RegExp(t.join("/"),i)},_isRegExpOption:function(t,i){return"url"!==t&&"string"===e.type(i)&&/^\/.*\/[igm]{0,3}$/.test(i)},_initDataAttributes:function(){var t=this,i=this.options,n=this.element.data();e.each(this.element[0].attributes,function(e,o){var s,r=o.name.toLowerCase();/^data-/.test(r)&&(r=r.slice(5).replace(/-[a-z]/g,function(e){return e.charAt(1).toUpperCase()}),s=n[r],t._isRegExpOption(r,s)&&(s=t._getRegExp(s)),i[r]=s)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var i=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,i._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var i,n,o=this,s=e.Deferred(),r=s.promise();return r.abort=function(){return n=!0,i?i.abort():(s.reject(null,"abort","abort"),r)},this._getFileInputFiles(t.fileInput).always(function(e){n||(e.length?(t.files=e,(i=o._onSend(null,t)).then(function(e,t,i){s.resolve(e,t,i)},function(e,t,i){s.reject(e,t,i)})):s.reject())}),this._enhancePromise(r)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],e):"object"==typeof exports?e(require("jquery"),require("./jquery.fileupload")):e(window.jQuery)}(function(e){"use strict";var t=e.blueimp.fileupload.prototype.options.add;e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{processQueue:[],add:function(i,n){var o=e(this);n.process(function(){return o.fileupload("process",n)}),t.call(this,i,n)}},processActions:{},_processFile:function(t,i){var n=this,o=e.Deferred().resolveWith(n,[t]).promise();return this._trigger("process",null,t),e.each(t.processQueue,function(t,s){var r=function(t){return i.errorThrown?e.Deferred().rejectWith(n,[i]).promise():n.processActions[s.action].call(n,t,s)};o=o[n._promisePipe](r,s.always&&r)}),o.done(function(){n._trigger("processdone",null,t),n._trigger("processalways",null,t)}).fail(function(){n._trigger("processfail",null,t),n._trigger("processalways",null,t)}),o},_transformProcessQueue:function(t){var i=[];e.each(t.processQueue,function(){var n={},o=this.action,s=!0===this.prefix?o:this.prefix;e.each(this,function(i,o){"string"===e.type(o)&&"@"===o.charAt(0)?n[i]=t[o.slice(1)||(s?s+i.charAt(0).toUpperCase()+i.slice(1):i)]:n[i]=o}),i.push(n)}),t.processQueue=i},processing:function(){return this._processing},process:function(t){var i=this,n=e.extend({},this.options,t);return n.processQueue&&n.processQueue.length&&(this._transformProcessQueue(n),0===this._processing&&this._trigger("processstart"),e.each(t.files,function(o){var s=o?e.extend({},n):n,r=function(){return t.errorThrown?e.Deferred().rejectWith(i,[t]).promise():i._processFile(s,t)};s.index=o,i._processing+=1,i._processingQueue=i._processingQueue[i._promisePipe](r,r).always(function(){i._processing-=1,0===i._processing&&i._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=e.Deferred().resolveWith(this).promise()}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","load-image-meta","load-image-scale","load-image-exif","load-image-orientation","canvas-to-blob","./jquery.fileupload-process"],e):"object"==typeof exports?e(require("jquery"),require("blueimp-load-image/js/load-image"),require("blueimp-load-image/js/load-image-meta"),require("blueimp-load-image/js/load-image-scale"),require("blueimp-load-image/js/load-image-exif"),require("blueimp-load-image/js/load-image-orientation"),require("blueimp-canvas-to-blob"),require("./jquery.fileupload-process")):e(window.jQuery,window.loadImage)}(function(e,t){"use strict";e.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadImageMetaData",maxMetaDataSize:"@",disableImageHead:"@",disableMetaDataParsers:"@",disableExif:"@",disableExifOffsets:"@",includeExifTags:"@",excludeExifTags:"@",disableIptc:"@",disableIptcOffsets:"@",includeIptcTags:"@",excludeIptcTags:"@",disabled:"@disableImageMetaDataLoad"},{action:"loadImage",prefix:!0,fileTypes:"@",maxFileSize:"@",noRevoke:"@",disabled:"@disableImageLoad"},{action:"resizeImage",prefix:"image",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",forceResize:"@",disabled:"@disableImageResize"},{action:"saveImage",quality:"@imageQuality",type:"@imageType",disabled:"@disableImageResize"},{action:"saveImageMetaData",disabled:"@disableImageMetaDataSave"},{action:"resizeImage",prefix:"preview",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",thumbnail:"@",canvas:"@",disabled:"@disableImagePreview"},{action:"setImage",name:"@imagePreviewName",disabled:"@disableImagePreview"},{action:"deleteImageReferences",disabled:"@disableImageReferencesDeletion"}),e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{loadImageFileTypes:/^image\/(gif|jpeg|png|svg\+xml)$/,loadImageMaxFileSize:1e7,imageMaxWidth:1920,imageMaxHeight:1080,imageOrientation:!0,imageCrop:!1,disableImageResize:!0,previewMaxWidth:80,previewMaxHeight:80,previewOrientation:!0,previewThumbnail:!0,previewCrop:!1,previewCanvas:!0},processActions:{loadImage:function(i,n){if(n.disabled)return i;var o=this,s=i.files[i.index],r=e.Deferred();return"number"===e.type(n.maxFileSize)&&s.size>n.maxFileSize||n.fileTypes&&!n.fileTypes.test(s.type)||!t(s,function(e){e.src&&(i.img=e),r.resolveWith(o,[i])},n)?i:r.promise()},resizeImage:function(i,n){if(n.disabled||!i.canvas&&!i.img)return i;n=e.extend({canvas:!0},n);var o,s,r=this,a=e.Deferred(),l=n.canvas&&i.canvas||i.img,d=function(e){e&&(e.width!==l.width||e.height!==l.height||n.forceResize)&&(i[e.getContext?"canvas":"img"]=e),i.preview=e,a.resolveWith(r,[i])};return i.exif&&n.thumbnail&&(s=(o=i.exif.get("Thumbnail"))&&o.get("Blob"))?(n.orientation=i.exif.get("Orientation"),t(s,d,n),a.promise()):(i.orientation?delete n.orientation:i.orientation=n.orientation||t.orientation,l?(d(t.scale(l,n,i)),a.promise()):i)},saveImage:function(t,i){if(!t.canvas||i.disabled)return t;var n=this,o=t.files[t.index],s=e.Deferred();return t.canvas.toBlob?(t.canvas.toBlob(function(e){e.name||(o.type===e.type?e.name=o.name:o.name&&(e.name=o.name.replace(/\.\w+$/,"."+e.type.substr(6)))),o.type!==e.type&&delete t.imageHead,t.files[t.index]=e,s.resolveWith(n,[t])},i.type||o.type,i.quality),s.promise()):t},loadImageMetaData:function(i,n){if(n.disabled)return i;var o=this,s=e.Deferred();return t.parseMetaData(i.files[i.index],function(t){e.extend(i,t),s.resolveWith(o,[i])},n),s.promise()},saveImageMetaData:function(i,n){if(!(i.imageHead&&i.canvas&&i.canvas.toBlob)||n.disabled)return i;var o=this,s=i.files[i.index],r=e.Deferred();return!0===i.orientation&&i.exifOffsets&&t.writeExifData(i.imageHead,i,"Orientation",1),t.replaceHead(s,i.imageHead,function(e){e.name=s.name,i.files[i.index]=e,r.resolveWith(o,[i])}),r.promise()},setImage:function(e,t){return e.preview&&!t.disabled&&(e.files[e.index][t.name||"preview"]=e.preview),e},deleteImageReferences:function(e,t){return t.disabled||(delete e.img,delete e.canvas,delete e.preview,delete e.imageHead),e}}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","./jquery.fileupload-process"],e):"object"==typeof exports?e(require("jquery"),require("blueimp-load-image/js/load-image"),require("./jquery.fileupload-process")):e(window.jQuery,window.loadImage)}(function(e,t){"use strict";e.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadAudio",prefix:!0,fileTypes:"@",maxFileSize:"@",disabled:"@disableAudioPreview"},{action:"setAudio",name:"@audioPreviewName",disabled:"@disableAudioPreview"}),e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{loadAudioFileTypes:/^audio\/.*$/},_audioElement:document.createElement("audio"),processActions:{loadAudio:function(i,n){if(n.disabled)return i;var o,s,r=i.files[i.index];return this._audioElement.canPlayType&&this._audioElement.canPlayType(r.type)&&("number"!==e.type(n.maxFileSize)||r.size<=n.maxFileSize)&&(!n.fileTypes||n.fileTypes.test(r.type))&&(o=t.createObjectURL(r))?((s=this._audioElement.cloneNode(!1)).src=o,s.controls=!0,i.audio=s,i):i},setAudio:function(e,t){return e.audio&&!t.disabled&&(e.files[e.index][t.name||"preview"]=e.audio),e}}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","./jquery.fileupload-process"],e):"object"==typeof exports?e(require("jquery"),require("blueimp-load-image/js/load-image"),require("./jquery.fileupload-process")):e(window.jQuery,window.loadImage)}(function(e,t){"use strict";e.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadVideo",prefix:!0,fileTypes:"@",maxFileSize:"@",disabled:"@disableVideoPreview"},{action:"setVideo",name:"@videoPreviewName",disabled:"@disableVideoPreview"}),e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{loadVideoFileTypes:/^video\/.*$/},_videoElement:document.createElement("video"),processActions:{loadVideo:function(i,n){if(n.disabled)return i;var o,s,r=i.files[i.index];return this._videoElement.canPlayType&&this._videoElement.canPlayType(r.type)&&("number"!==e.type(n.maxFileSize)||r.size<=n.maxFileSize)&&(!n.fileTypes||n.fileTypes.test(r.type))&&(o=t.createObjectURL(r))?((s=this._videoElement.cloneNode(!1)).src=o,s.controls=!0,i.video=s,i):i},setVideo:function(e,t){return e.video&&!t.disabled&&(e.files[e.index][t.name||"preview"]=e.video),e}}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload-process"],e):"object"==typeof exports?e(require("jquery"),require("./jquery.fileupload-process")):e(window.jQuery)}(function(e){"use strict";e.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"}),e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{getNumberOfFiles:e.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(t,i){if(i.disabled)return t;var n,o=e.Deferred(),s=this.options,r=t.files[t.index];return(i.minFileSize||i.maxFileSize)&&(n=r.size),"number"===e.type(i.maxNumberOfFiles)&&(s.getNumberOfFiles()||0)+t.files.length>i.maxNumberOfFiles?r.error=s.i18n("maxNumberOfFiles"):!i.acceptFileTypes||i.acceptFileTypes.test(r.type)||i.acceptFileTypes.test(r.name)?n>i.maxFileSize?r.error=s.i18n("maxFileSize"):"number"===e.type(n)&&n<i.minFileSize?r.error=s.i18n("minFileSize"):delete r.error:r.error=s.i18n("acceptFileTypes"),r.error||t.files.error?(t.files.error=!0,o.rejectWith(this,[t])):o.resolveWith(this,[t]),o.promise()}}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","blueimp-tmpl","./jquery.fileupload-image","./jquery.fileupload-audio","./jquery.fileupload-video","./jquery.fileupload-validate"],e):"object"==typeof exports?e(require("jquery"),require("blueimp-tmpl"),require("./jquery.fileupload-image"),require("./jquery.fileupload-audio"),require("./jquery.fileupload-video"),require("./jquery.fileupload-validate")):e(window.jQuery,window.tmpl)}(function(e,t){"use strict";e.blueimp.fileupload.prototype._specialOptions.push("filesContainer","uploadTemplateId","downloadTemplateId"),e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{autoUpload:!1,showElementClass:"in",uploadTemplateId:"template-upload",downloadTemplateId:"template-download",filesContainer:void 0,prependFiles:!1,dataType:"json",messages:{unknownError:"Unknown error"},getNumberOfFiles:function(){return this.filesContainer.children().not(".processing").length},getFilesFromResponse:function(t){return t.result&&e.isArray(t.result.files)?t.result.files:[]},add:function(t,i){if(t.isDefaultPrevented())return!1;var n=e(this),o=n.data("blueimp-fileupload")||n.data("fileupload"),s=o.options;i.context=o._renderUpload(i.files).data("data",i).addClass("processing"),s.filesContainer[s.prependFiles?"prepend":"append"](i.context),o._forceReflow(i.context),o._transition(i.context),i.process(function(){return n.fileupload("process",i)}).always(function(){i.context.each(function(t){e(this).find(".size").text(o._formatFileSize(i.files[t].size))}).removeClass("processing"),o._renderPreviews(i)}).done(function(){i.context.find(".edit,.start").prop("disabled",!1),!1!==o._trigger("added",t,i)&&(s.autoUpload||i.autoUpload)&&!1!==i.autoUpload&&i.submit()}).fail(function(){i.files.error&&i.context.each(function(t){var n=i.files[t].error;n&&e(this).find(".error").text(n)})})},send:function(t,i){if(t.isDefaultPrevented())return!1;var n=e(this).data("blueimp-fileupload")||e(this).data("fileupload");return i.context&&i.dataType&&"iframe"===i.dataType.substr(0,6)&&i.context.find(".progress").addClass(!e.support.transition&&"progress-animated").attr("aria-valuenow",100).children().first().css("width","100%"),n._trigger("sent",t,i)},done:function(t,i){if(t.isDefaultPrevented())return!1;var n,o,s=e(this).data("blueimp-fileupload")||e(this).data("fileupload"),r=(i.getFilesFromResponse||s.options.getFilesFromResponse)(i);i.context?i.context.each(function(a){var l=r[a]||{error:"Empty file upload result"};o=s._addFinishedDeferreds(),s._transition(e(this)).done(function(){var r=e(this);n=s._renderDownload([l]).replaceAll(r),s._forceReflow(n),s._transition(n).done(function(){i.context=e(this),s._trigger("completed",t,i),s._trigger("finished",t,i),o.resolve()})})}):(n=s._renderDownload(r)[s.options.prependFiles?"prependTo":"appendTo"](s.options.filesContainer),s._forceReflow(n),o=s._addFinishedDeferreds(),s._transition(n).done(function(){i.context=e(this),s._trigger("completed",t,i),s._trigger("finished",t,i),o.resolve()}))},fail:function(t,i){if(t.isDefaultPrevented())return!1;var n,o,s=e(this).data("blueimp-fileupload")||e(this).data("fileupload");i.context?i.context.each(function(r){if("abort"!==i.errorThrown){var a=i.files[r];a.error=a.error||i.errorThrown||i.i18n("unknownError"),o=s._addFinishedDeferreds(),s._transition(e(this)).done(function(){var r=e(this);n=s._renderDownload([a]).replaceAll(r),s._forceReflow(n),s._transition(n).done(function(){i.context=e(this),s._trigger("failed",t,i),s._trigger("finished",t,i),o.resolve()})})}else o=s._addFinishedDeferreds(),s._transition(e(this)).done(function(){e(this).remove(),s._trigger("failed",t,i),s._trigger("finished",t,i),o.resolve()})}):"abort"!==i.errorThrown?(i.context=s._renderUpload(i.files)[s.options.prependFiles?"prependTo":"appendTo"](s.options.filesContainer).data("data",i),s._forceReflow(i.context),o=s._addFinishedDeferreds(),s._transition(i.context).done(function(){i.context=e(this),s._trigger("failed",t,i),s._trigger("finished",t,i),o.resolve()})):(s._trigger("failed",t,i),s._trigger("finished",t,i),s._addFinishedDeferreds().resolve())},progress:function(t,i){if(t.isDefaultPrevented())return!1;var n=Math.floor(i.loaded/i.total*100);i.context&&i.context.each(function(){e(this).find(".progress").attr("aria-valuenow",n).children().first().css("width",n+"%")})},progressall:function(t,i){if(t.isDefaultPrevented())return!1;var n=e(this),o=Math.floor(i.loaded/i.total*100),s=n.find(".fileupload-progress"),r=s.find(".progress-extended");r.length&&r.html((n.data("blueimp-fileupload")||n.data("fileupload"))._renderExtendedProgress(i)),s.find(".progress").attr("aria-valuenow",o).children().first().css("width",o+"%")},start:function(t){if(t.isDefaultPrevented())return!1;var i=e(this).data("blueimp-fileupload")||e(this).data("fileupload");i._resetFinishedDeferreds(),i._transition(e(this).find(".fileupload-progress")).done(function(){i._trigger("started",t)})},stop:function(t){if(t.isDefaultPrevented())return!1;var i=e(this).data("blueimp-fileupload")||e(this).data("fileupload"),n=i._addFinishedDeferreds();e.when.apply(e,i._getFinishedDeferreds()).done(function(){i._trigger("stopped",t)}),i._transition(e(this).find(".fileupload-progress")).done(function(){e(this).find(".progress").attr("aria-valuenow","0").children().first().css("width","0%"),e(this).find(".progress-extended").html("&nbsp;"),n.resolve()})},processstart:function(t){if(t.isDefaultPrevented())return!1;e(this).addClass("fileupload-processing")},processstop:function(t){if(t.isDefaultPrevented())return!1;e(this).removeClass("fileupload-processing")},destroy:function(t,i){if(t.isDefaultPrevented())return!1;var n=e(this).data("blueimp-fileupload")||e(this).data("fileupload"),o=function(){n._transition(i.context).done(function(){e(this).remove(),n._trigger("destroyed",t,i)})};i.url?(i.dataType=i.dataType||n.options.dataType,e.ajax(i).done(o).fail(function(){n._trigger("destroyfailed",t,i)})):o()}},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(t){var i=t||e.Deferred();return this._finishedUploads.push(i),i},_getFinishedDeferreds:function(){return this._finishedUploads},_enableDragToDesktop:function(){var t=e(this),i=t.prop("href"),n=t.prop("download"),o="application/octet-stream";t.on("dragstart",function(e){try{e.originalEvent.dataTransfer.setData("DownloadURL",[o,n,i].join(":"))}catch(e){}})},_formatFileSize:function(e){return"number"!=typeof e?"":e>=1e9?(e/1e9).toFixed(2)+" GB":e>=1e6?(e/1e6).toFixed(2)+" MB":(e/1e3).toFixed(2)+" KB"},_formatBitrate:function(e){return"number"!=typeof e?"":e>=1e9?(e/1e9).toFixed(2)+" Gbit/s":e>=1e6?(e/1e6).toFixed(2)+" Mbit/s":e>=1e3?(e/1e3).toFixed(2)+" kbit/s":e.toFixed(2)+" bit/s"},_formatTime:function(e){var t=new Date(1e3*e),i=Math.floor(e/86400);return(i=i?i+"d ":"")+("0"+t.getUTCHours()).slice(-2)+":"+("0"+t.getUTCMinutes()).slice(-2)+":"+("0"+t.getUTCSeconds()).slice(-2)},_formatPercentage:function(e){return(100*e).toFixed(2)+" %"},_renderExtendedProgress:function(e){return this._formatBitrate(e.bitrate)+" | "+this._formatTime(8*(e.total-e.loaded)/e.bitrate)+" | "+this._formatPercentage(e.loaded/e.total)+" | "+this._formatFileSize(e.loaded)+" / "+this._formatFileSize(e.total)},_renderTemplate:function(t,i){if(!t)return e();var n=t({files:i,formatFileSize:this._formatFileSize,options:this.options});return n instanceof e?n:e(this.options.templatesContainer).html(n).children()},_renderPreviews:function(t){t.context.find(".preview").each(function(i,n){e(n).empty().append(t.files[i].preview)})},_renderUpload:function(e){return this._renderTemplate(this.options.uploadTemplate,e)},_renderDownload:function(e){return this._renderTemplate(this.options.downloadTemplate,e).find("a[download]").each(this._enableDragToDesktop).end()},_editHandler:function(t){if(t.preventDefault(),this.options.edit){var i=this,n=e(t.currentTarget),o=n.closest(".template-upload"),s=o.data("data"),r=n.data().index;this.options.edit(s.files[r]).then(function(t){t&&(s.files[r]=t,s.context.addClass("processing"),o.find(".edit,.start").prop("disabled",!0),e(i.element).fileupload("process",s).always(function(){o.find(".size").text(i._formatFileSize(s.files[r].size)),s.context.removeClass("processing"),i._renderPreviews(s)}).done(function(){o.find(".edit,.start").prop("disabled",!1)}).fail(function(){o.find(".edit").prop("disabled",!1);var e=s.files[r].error;e&&o.find(".error").text(e)}))})}},_startHandler:function(t){t.preventDefault();var i=e(t.currentTarget),n=i.closest(".template-upload").data("data");i.prop("disabled",!0),n&&n.submit&&n.submit()},_cancelHandler:function(t){t.preventDefault();var i=e(t.currentTarget).closest(".template-upload,.template-download"),n=i.data("data")||{};n.context=n.context||i,n.abort?n.abort():(n.errorThrown="abort",this._trigger("fail",t,n))},_deleteHandler:function(t){t.preventDefault();var i=e(t.currentTarget);this._trigger("destroy",t,e.extend({context:i.closest(".template-download"),type:"DELETE"},i.data()))},_forceReflow:function(t){return e.support.transition&&t.length&&t[0].offsetWidth},_transition:function(t){var i=e.Deferred();if(e.support.transition&&t.hasClass("fade")&&t.is(":visible")){var n=function(o){o.target===t[0]&&(t.off(e.support.transition.end,n),i.resolveWith(t))};t.on(e.support.transition.end,n).toggleClass(this.options.showElementClass)}else t.toggleClass(this.options.showElementClass),i.resolveWith(t);return i},_initButtonBarEventHandlers:function(){var t=this.element.find(".fileupload-buttonbar"),i=this.options.filesContainer;this._on(t.find(".start"),{click:function(e){e.preventDefault(),i.find(".start").trigger("click")}}),this._on(t.find(".cancel"),{click:function(e){e.preventDefault(),i.find(".cancel").trigger("click")}}),this._on(t.find(".delete"),{click:function(e){e.preventDefault(),i.find(".toggle:checked").closest(".template-download").find(".delete").trigger("click"),t.find(".toggle").prop("checked",!1)}}),this._on(t.find(".toggle"),{change:function(t){i.find(".toggle").prop("checked",e(t.currentTarget).is(":checked"))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar").find(".start, .cancel, .delete"),"click"),this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super(),this._on(this.options.filesContainer,{"click .edit":this._editHandler,"click .start":this._startHandler,"click .cancel":this._cancelHandler,"click .delete":this._deleteHandler}),this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers(),this._off(this.options.filesContainer,"click"),this._super()},_enableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!1).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",!0).parent().addClass("disabled")},_initTemplates:function(){var e=this.options;e.templatesContainer=this.document[0].createElement(e.filesContainer.prop("nodeName")),t&&(e.uploadTemplateId&&(e.uploadTemplate=t(e.uploadTemplateId)),e.downloadTemplateId&&(e.downloadTemplate=t(e.downloadTemplateId)))},_initFilesContainer:function(){var t=this.options;void 0===t.filesContainer?t.filesContainer=this.element.find(".files"):t.filesContainer instanceof e||(t.filesContainer=e(t.filesContainer))},_initSpecialOptions:function(){this._super(),this._initFilesContainer(),this._initTemplates()},_create:function(){this._super(),this._resetFinishedDeferreds(),e.support.fileInput||this._disableFileInputButton()},enable:function(){var e=!1;this.options.disabled&&(e=!0),this._super(),e&&(this.element.find("input, button").prop("disabled",!1),this._enableFileInputButton())},disable:function(){this.options.disabled||(this.element.find("input, button").prop("disabled",!0),this._disableFileInputButton()),this._super()}})});